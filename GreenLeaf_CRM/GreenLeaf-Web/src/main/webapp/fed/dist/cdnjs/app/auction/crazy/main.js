define("app/auction/crazy/main",["$","../../common/util","../../common/config","../../common/dialog/confirmbox","arale/dialog/1.3.0/dialog","arale/overlay/1.1.4/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","arale/overlay/1.1.4/mask","arale/templatable/0.9.2/templatable","gallery/handlebars/1.0.2/handlebars","gallery/handlebars/1.0.2/runtime","../../common/dialog/confirmbox.handlebars","../../common/dialog/confirmbox.css","../../common/io","../../common/helpers","gallery/moment/2.0.0/moment","./list.handlebars","./ctrl.handlebars","./info.handlebars","./dialog.handlebars","./dialogList.handlebars","../../common/tictac","keenwon/jqPaginator/1.1.0/jqPaginator"],function(a){"use strict";var b,c,d,e,f=a("$"),g=a("../../common/util"),h=a("../../common/io"),i=a("../../common/helpers"),j=a("../../common/dialog/confirmbox"),k=a("./list.handlebars"),l=a("./ctrl.handlebars"),m=a("./info.handlebars"),n=a("./dialog.handlebars"),o=a("./dialogList.handlebars");a("../../common/tictac"),a("gallery/handlebars/1.0.2/handlebars"),a("gallery/handlebars/1.0.2/runtime"),a("keenwon/jqPaginator/1.1.0/jqPaginator"),i=f.extend({},i,{soonBegin:function(a,c){return a>b?c.fn(this):c.inverse(this)},isSuccess:function(a,b){return"4"===a?b.fn(this):b.inverse(this)},isCurrent:function(a,c,d){return a===b&&"3"===c?d.fn(this):d.inverse(this)}});var p={awardHash:{},currentAwardHash:{},detailModel:{awardId:0,pageNo:1,pageSize:5},batchNum:0,canSubmit:!0,CTRLSTATUS:{LIUPAI:1,OVER:2,CANNOT:3,CAN:4,ISLEADER:5,ALLIN:6},init:function(){var a=this;a.cacheElements(),a.initSlide(),a.getList(),a.initTimer(),setTimeout(function(){a.switchSlide(b)},500),a.bindEvents()},cacheElements:function(){var a=this;a.$countDown=f("#J_CountDown"),a.$slide=f("#J_Slide"),a.$slideBtn=f("#J_SlideBtn"),a.$tip=f("#J_Slide_Tip"),a.$tipContent=f("#J_Slide_TipContent"),a.$user=f("#J_User"),a.$userInfo=f("#J_UserInfo"),a.$awardNames=f("#J_NextBatchAwardNames")},getList:function(){var a=this;h.syncGet(g.getUrl("crazyQuery"),{},function(){var f=this.data,g="",h=null,j=null,l="";b=f.currentBatch,c=f.leaderInAuction,a.batchNum=f.auctionBatchVos.length,a.$slide.html(k(f,{helpers:i})),a.awardHash={},a.currentAwardHash={};for(var m=0,n=f.auctionBatchVos.length;n>m;m++){h=f.auctionBatchVos[m],h.auctionBatch===b&&(d=h.auctionId,e=h.crazyBatchEndTime,g=h.nextBatchAwardNames);for(var o=0,p=h.awardForeVos.length;p>o;o++)j=h.awardForeVos[o],a.awardHash[j.id]=j,h.auctionBatch===b&&(a.currentAwardHash[j.id]=j,a.refreshCtrl(j.id))}l=g?"下一批次物品："+g:"",a.$awardNames.text(l).attr("title",l)})},initTimer:function(){var a=this;Tictac.init({currentTime:a.proofTime(),interval:2e3,callback:function(){a.refreshList()}}),Tictac.create("J_CountDown",{targetId:"J_CountDown",expires:e,format:{minutes:"{mm}'",seconds:'{ss}"'},timeout:function(){a.finish()}});var b=null,c="",d={minutes:"{mm}:",seconds:"{ss}"};for(var f in a.currentAwardHash)a.currentAwardHash.hasOwnProperty(f)&&"3"===a.currentAwardHash[f].awardState&&(b=a.currentAwardHash[f],c="J_CountDown_"+b.id,Tictac.create(c,{targetId:c,expires:b.countDownTime,formatIgnore:!1,format:d,timeout:function(){a.execute()}}))},refreshList:function(){var a=this,b=a.currentAwardHash,d=null,e="",j=null,k=null,l=null,n=null,o=!1;h.get(g.getUrl("crazyRefresh"),{},function(){n=this.data,c!==n.leaderInAuction&&(c=n.leaderInAuction,o=!0);for(var g=0,h=n.awardForeRefreshVos.length;h>g;g++){if(d=n.awardForeRefreshVos[g],e="J_CountDown_"+d.id,j=f("#"+d.id),k=f("#J_Dialog_"+d.id),l=f("#J_Ctrl_"+d.id),!b[d.id])return;if(o&&"3"===d.awardState||b[d.id].awardState!==d.awardState||b[d.id].awardLeaderScore!==d.awardLeaderScore){switch(b[d.id]=f.extend({},b[d.id],d),d.awardState){case"3":a.animation(d.id),Tictac.reset(e,{expires:d.countDownTime});break;case"4":a.animation(d.id),Tictac.remove(e),j.addClass("over").find(".bq-time-c").text("已结束");break;default:Tictac.remove(e),j.addClass("liupai").find(".bq-time-c").text("流拍")}f(".J_Info",j).html(m(d,{helpers:i})),a.refreshCtrl(d.id),k.length>0&&a.getDetailList()}}})},refreshCtrl:function(a){var b=this;if(b.currentAwardHash.hasOwnProperty(a)&&!b.currentAwardHash[a].isOver){b.getAwardStatus(a);var c=b.currentAwardHash[a];c.oldCtrlState!==c.ctrlState&&((c.ctrlState===b.CTRLSTATUS.OVER||c.ctrlState===b.CTRLSTATUS.LIUPAI||c.ctrlState===b.CTRLSTATUS.CANNOT)&&(c.isOver=!0),f("#J_Ctrl_"+a).html(l({ctrlState:c.ctrlState,awardLeaderName:c.awardLeaderName,awardId:c.id,auctionId:d},{helpers:i})))}},getAwardStatus:function(a){var b=this,d=b.currentAwardHash[a];d.oldCtrlState=d.ctrlState,d.ctrlState="4"===d.awardState?b.CTRLSTATUS.OVER:"5"===d.awardState?b.CTRLSTATUS.LIUPAI:d.awardLeaderScore>=userScore?c?b.CTRLSTATUS.ALLIN:b.CTRLSTATUS.CANNOT:c&&d.awardLeaderUserno!==userno?b.CTRLSTATUS.ISLEADER:b.CTRLSTATUS.CAN},getDetail:function(a){var b=this,c=b.awardHash[a].name,d=b.awardHash[a].price,e=b.awardHash[a].image,g=b.awardHash[a].leaderScore,h=b.awardHash[a].description;b.detailModel.awardId=a,b.detailModel.pageNo=1;var k=new j({align:{selfXY:["50%","-65px"],baseXY:["50%",0]},width:658,zIndex:888,message:n({awardId:a,name:c,image:e,price:d,leaderScore:g,description:h,score:userScore},{helpers:i}),confirmTpl:"",cancelTpl:""}).after("show",function(){b.getDetailList()}).before("hide",function(){var a=f("#J_Dialog_Page");a.data("jqPaginator")&&a.jqPaginator("destroy")}).after("hide",function(){k.destroy()}).show()},getDetailList:function(){var a=this;h.get(g.getUrl("historyDetail"),a.detailModel,function(){var b=this.data,c=b.pageNo,d=b.pageSize,e=b.totalHit,g=o(b,{helpers:i});f("#J_Dialog_List").html(g),a.paginator(c,d,e)})},paginator:function(a,b,c){var d=this,e=f("#J_Dialog_Page");return b>=c?void(e.data("jqPaginator")&&e.jqPaginator("destroy")):void e.jqPaginator({totalCounts:c,pageSize:b,visiblePages:5,currentPage:a,first:'<li><a href="javascript:;">首页</a></li>',prev:'<li><a href="javascript:;"><i class="ico-arrow ico-arrow2"></i>上一页</a></li>',next:'<li><a href="javascript:;">下一页<i class="ico-arrow ico-arrow3"></i></a></li>',last:'<li><a href="javascript:;">末页</a></li>',page:'<li><a href="javascript:;">{{page}}</a></li>',onPageChange:function(a,b){return"change"===b&&d.detailModel.pageNo!=a&&(d.detailModel.pageNo=a,d.getDetailList()),!1}})},animation:function(a){var b=f("#"+a),c=1,d=null;d=setInterval(function(){4===c&&(clearInterval(d),d=null),c%2!==0?b.addClass("goods-refresh"):b.removeClass("goods-refresh"),c++},180)},execute:function(){Tictac.execute()},proofTime:function(){var a=0,b=+new Date,c=0;return h.syncGet(g.getUrl("systemTime"),{},function(){c=+new Date,a=this.data+(c-b)/2}),a},initSlide:function(){var a=this;a.$slideBtn.off(),a.$slideBtn.on("mouseover","a",function(){var b=f(this),c=b.data("role"),d=55*b.index()+"px";switch(c){case"prev":a.$tipContent.text("上一批次");break;case"now":a.$tipContent.text("正在竞拍");break;case"next":a.$tipContent.text("下一批次")}a.$tip.css("top",d),a.$tip.show()}).on("mouseout","a",function(){a.$tip.hide()}).on("click","a",function(){a.switchSlide(f(this).data("index"))})},switchSlide:function(a){var c=this,d=806,e=20,f=c.$slideBtn.find("[data-role=prev]"),g=c.$slideBtn.find("[data-role=next]"),h=c.$slideBtn.find("[data-role=now]");c.$slide.animate({top:e-(a-1)*d+"px"}),1===a?f.css("visibility","hidden"):f.css("visibility","visible").data("index",a-1),a===c.batchNum?g.css("visibility","hidden"):g.css("visibility","visible").data("index",a+1),h.data("index",b)},auction:function(a){var b=this;b.canSubmit=!1,f(".J_Save").prop("disabled",!0),f(".J_AllIn").prop("disabled",!0),setTimeout(function(){b.canSubmit=!0,f(".J_Input").trigger("change"),f(".J_AllIn").prop("disabled",!1)},1200),h.post(g.getUrl("auction"),a,function(){b.execute()})},finish:function(){var a=this;if(Tictac.destroy(),b<a.batchNum)var c=new j({message:'<p style="text-align: center;">正在进入下一批次......</p>',width:"300px",effect:"fade",confirmTpl:"",cancelTpl:"",closeTpl:""}).after("show",function(){window.setTimeout(function(){c.hide()},2e3)}).after("hide",function(){c.destroy(),a.getList(),a.initTimer(),a.switchSlide(b)}).show();else new j({message:'<p style="text-align: center;">竞拍结束，结果统计中......</p>',width:"300px",effect:"fade",confirmTpl:"",cancelTpl:"",closeTpl:""}).after("show",function(){window.setTimeout(function(){window.location.href="/history/detail/"+d+".htm"},5e3)}).show()},bindEvents:function(){var a=this;a.$user.on("click",function(){var b=(f(window).innerWidth()-1e3)/2;b>260?a.$userInfo.css("right",b-260+"px"):a.$userInfo.css("right",b+"px"),a.$user.children("i").toggleClass("ico-reduce"),a.$userInfo.toggle()}),a.$slide.on("change",".J_Input",function(){var b=f(this),c=b.closest("form"),d=f(".J_Save",c),e=c.data("awardid"),g=f.trim(b.val());/^\d+$/g.test(g)&&userScore>=+g&&+g>a.currentAwardHash[e].awardLeaderScore&&a.canSubmit?d.prop("disabled",!1):d.prop("disabled",!0)}),a.$slide.on("keyup",".J_Input",function(a){var b=f(this),c=b.closest("form").find(".J_Save");b.trigger("change");var d=a.keyCode||a.which||a.charCode;13!==d||c.prop("disabled")||c.trigger("click")}),a.$slide.on("click",".J_Save",function(){if(a.canSubmit){var b=f(this).closest("form"),c=b.find(".J_Input"),d=g.packForm(b);c.val(""),a.auction(d)}}),a.$slide.on("click",".J_AllIn",function(){var b=g.packForm(f(this).prev("form"));b.score=userScore,a.auction(b)}),a.$slide.on("click","[data-role=get]",function(){a.getDetail(f(this).closest("li").data("awardid"))})}};p.init()}),define("app/common/util",["app/common/config","app/common/dialog/confirmbox","$","arale/dialog/1.3.0/dialog","arale/overlay/1.1.4/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","arale/overlay/1.1.4/mask","arale/templatable/0.9.2/templatable","gallery/handlebars/1.0.2/handlebars","gallery/handlebars/1.0.2/runtime"],function(a){"use strict";var b={},c=a("app/common/config"),d=(a("app/common/dialog/confirmbox"),a("$")),e=d("#J_Message"),f=window;return b.urlParams=function(){return b.queryToJson(window.location.search.replace(/^\?/,""))},b.packForm=function(a,c){var e="string"==typeof a?d(a):a,f=e.serializeArray(),g={};return c="undefined"==typeof c?!0:!1,d.each(f,function(){var a=this.value;this.value="null"===a?null:this.value,"undefined"!=typeof g[this.name]?(g[this.name].push||(g[this.name]=[g[this.name]]),g[this.name].push(c?b.escape(this.value):d.trim(this.value))):g[this.name]=c?b.escape(this.value):d.trim(this.value)}),g},b.escape=function(a){return d.trim(a).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},b.getUrl=function(a){var b=ctx?ctx+"/":"/";return b+c[a]},b.showMessage=function(a,b){if(e){b||(b={isError:!0,top:"0"}),e.find(".alert-message-text").html(a);var c=!1,d="60px";b&&(c=b.isError,d=b.top),e.animate({top:d}),c?e.addClass("alert-error").find(".close").off("click").on("click",function(){e.removeClass("alert-error").animate({top:"-80px"})}):f.setTimeout(function(){e.animate({top:"-60px"})},3e3)}},b}),define("app/common/config",[],{indexList:"scoreRecord/queryFrontScoreRecordList.do",indexUser:"score/queryUserScore.do",historyList:"auction/query.do",historyDetail:"auctionRecord/queryByAwardId.do",rankList:"score/userScoreList.do",myAward:"award/queryAwardPage.do",systemTime:"auction/systemTime.do",auction:"auctionRecord/bidAward.do",queryMyScore:"auctionRecord/currentScore.do",normalQueryAll:"award/queryAwardNormalState.do",normalQueryAble:"award/queryAwardAble.do",normalQueryFollow:"award/queryFocusAward.do",normalQueryAllRefresh:"awardLeader/queryAwardLeaderByAuction.do",normalQueryAbleRefresh:"awardLeader/getMyLeaderInfoList.do",normalQueryFollowRefresh:"awardLeader/getFocusLeaderInfoList.do",normalFollow:"awardFocus/add.do",normalUnfollow:"awardFocus/delete.do",crazyQuery:"auction/crazy/refreshAll.do",crazyRefresh:"auction/crazy/refresh.do",selectUsers:"select/users.do",selectSystems:"select/systems.do",adminScoreQuery:"score/query.do",adminScoreAdd:"score/increase.do",adminScoreImport:"score/importScoreList.do",adminScoreDeduct:"score/decrease.do",logQuery:"scoreRecord/query.do",auctionQuery:"auction/query.do",auctionDelete:"auction/delete.do",auctionAdd:"auction/add.do",auctionUpdate:"auction/update.do",auctionGet:"auction/get.do",auctionAwardResult:"award/queryAwardResult.do",auctionAwardGet:"award/get.do",auctionAwardQuery:"award/queryAwardResult.do",auctionAwardAdd:"award/add.do",auctionAwardUpdate:"award/update.do",auctionAwardDelete:"award/delete.do",auctionAwardUploadImage:"award/uploadImage.do",auctionAwardImports:"award/addByFile.do",auctionAwardSort:"award/sort.do"}),define("app/common/dialog/confirmbox",["$","arale/dialog/1.3.0/dialog","arale/overlay/1.1.4/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","arale/overlay/1.1.4/mask","arale/templatable/0.9.2/templatable","gallery/handlebars/1.0.2/handlebars","gallery/handlebars/1.0.2/runtime"],function(a,b,c){"use strict";var d=a("$"),e=a("arale/dialog/1.3.0/dialog"),f=a("app/common/dialog/confirmbox.handlebars");a("app/common/dialog/confirmbox.css");var g=e.extend({attrs:{title:"",classPrefix:"ermp-dialog",width:"900px",hasPadding:!0,confirmTpl:'<a class="btn btn2" href="javascript:;">确定</a>',cancelTpl:'<a class="btn btn2" href="javascript:;">取消</a>',message:"默认内容"},setup:function(){g.superclass.setup.call(this);var a={classPrefix:this.get("classPrefix"),message:this.get("message"),title:this.get("title"),confirmTpl:this.get("confirmTpl"),cancelTpl:this.get("cancelTpl"),hasPadding:this.get("hasPadding"),hasFoot:this.get("confirmTpl")||this.get("cancelTpl")};this.set("content",f(a))},events:{"click [data-role=confirm]":function(a){a.preventDefault(),this.trigger("confirm")},"click [data-role=cancel]":function(a){a.preventDefault(),this.trigger("cancel"),this.hide()}},_onChangeMessage:function(a){this.$("[data-role=message]").html(a)},_onChangeTitle:function(a){this.$("[data-role=title]").html(a)},_onChangeConfirmTpl:function(a){this.$("[data-role=confirm]").html(a)},_onChangeCancelTpl:function(a){this.$("[data-role=cancel]").html(a)}});g.alert=function(a,b,c){a='<div style="padding:10px">'+a+"</div>";var e={message:a,width:"500px",onConfirm:function(){"function"==typeof b&&b(),this.hide()}};new g(d.extend(null,e,c)).show().after("hide",function(){this.destroy()})},g.confirm=function(a,b,c,e){"object"!=typeof c||e||(e=c);var f={message:a,className:"ermp-confirm",width:"250px",confirmTpl:'<a class="btn btn2 btn-s" href="javascript:;">确定</a>',cancelTpl:'<a class="btn btn2 btn-s" href="javascript:;">取消</a>',onConfirm:function(){b&&b(),this.hide()},onCancel:function(){"function"==typeof c&&c(),this.hide()},align:{selfXY:["50%","-100px"],baseXY:["50%",0]}};new g(d.extend(null,f,e)).show().after("hide",function(){this.destroy()})},g.show=function(a,b,c){var e={message:a,title:"",confirmTpl:!1,cancelTpl:!1};new g(d.extend(null,e,c)).after("show",function(){b&&b()}).show().after("hide",function(){this.destroy()})},c.exports=g,c.exports.outerBoxClass="arale-dialog-1_2_5"}),define("arale/dialog/1.3.0/dialog",["$","arale/overlay/1.1.4/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","arale/overlay/1.1.4/mask","arale/templatable/0.9.2/templatable","gallery/handlebars/1.0.2/handlebars","./dialog.handlebars"],function(a,b,c){function d(a){null==a.attr("tabindex")&&a.attr("tabindex","-1")}function e(a){var b=a[0].contentWindow.document;return b.body.scrollHeight&&b.documentElement.scrollHeight?Math.min(b.body.scrollHeight,b.documentElement.scrollHeight):b.documentElement.scrollHeight?b.documentElement.scrollHeight:b.body.scrollHeight?b.body.scrollHeight:void 0}var f=a("$"),g=a("arale/overlay/1.1.4/overlay"),h=a("arale/overlay/1.1.4/mask"),i=a("arale/events/1.1.0/events"),j=a("arale/templatable/0.9.2/templatable"),k=g.extend({Implements:j,attrs:{template:a("./dialog.handlebars"),trigger:{value:null,getter:function(a){return f(a)}},classPrefix:"ui-dialog",content:{value:null,setter:function(a){return/^(https?:\/\/|\/|\.\/|\.\.\/)/.test(a)&&(this._type="iframe",(a.indexOf("?ajax")>0||a.indexOf("&ajax")>0)&&(this._ajax=!0)),a}},hasMask:!0,closeTpl:"×",width:500,height:null,initialHeight:300,effect:"none",zIndex:999,autoFit:!0,align:{value:{selfXY:["50%","50%"],baseXY:["50%","42%"]},getter:function(a){return this.element.height()>f(window).height()?{selfXY:["50%","0"],baseXY:["50%","0"]}:a}}},parseElement:function(){this.set("model",{classPrefix:this.get("classPrefix")}),k.superclass.parseElement.call(this),this.contentElement=this.$("[data-role=content]"),this.contentElement.css({height:"100%",zoom:1}),this.$("[data-role=close]").hide()},events:{"click [data-role=close]":function(a){a.preventDefault(),this.hide()}},show:function(){return"iframe"===this._type&&(this._ajax?this._ajaxHtml():(!this.get("height")&&this.contentElement.css("height",this.get("initialHeight")),this._showIframe())),k.superclass.show.call(this),this},hide:function(){return"iframe"===this._type&&this.iframe&&(this.iframe.attr({src:"javascript:'';"}),this.iframe.remove(),this.iframe=null),k.superclass.hide.call(this),clearInterval(this._interval),delete this._interval,this},destroy:function(){return this.element.remove(),this._hideMask(),clearInterval(this._interval),k.superclass.destroy.call(this)},setup:function(){k.superclass.setup.call(this),this._setupTrigger(),this._setupMask(),this._setupKeyEvents(),this._setupFocus(),d(this.element),d(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},_onRenderContent:function(a){if("iframe"!==this._type){var b;try{b=f(a)}catch(c){b=[]}b[0]?this.contentElement.empty().append(b):this.contentElement.empty().html(a),this._setPosition()}},_onRenderCloseTpl:function(a){""===a?this.$("[data-role=close]").html(a).hide():this.$("[data-role=close]").html(a).show()},_onRenderVisible:function(a){a?"fade"===this.get("effect")?this.element.fadeIn(300):this.element.show():this.element.hide()},_setupTrigger:function(){this.delegateEvents(this.get("trigger"),"click",function(a){a.preventDefault(),this.activeTrigger=f(a.currentTarget),this.show()})},_setupMask:function(){var a=this;h._dialogs=h._dialogs||[],this.after("show",function(){if(this.get("hasMask")){h.set("zIndex",a.get("zIndex")).show(),h.element.insertBefore(a.element);for(var b=!1,c=0;c<h._dialogs.length;c++)h._dialogs[c]===a&&(b=!0);b||h._dialogs.push(a)}}),this.after("hide",this._hideMask)},_hideMask:function(){if(this.get("hasMask"))if(h._dialogs&&h._dialogs.pop(),h._dialogs&&h._dialogs.length>0){var a=h._dialogs[h._dialogs.length-1];h.set("zIndex",a.get("zIndex")),h.element.insertBefore(a.element)}else h.hide()},_setupFocus:function(){this.after("show",function(){this.element.focus()}),this.after("hide",function(){this.activeTrigger&&this.activeTrigger.focus()})},_setupKeyEvents:function(){this.delegateEvents(f(document),"keyup.esc",function(a){27===a.keyCode&&this.get("visible")&&this.hide()})},_showIframe:function(){var a=this;this.iframe||this._createIframe(),this.iframe.attr({src:this._fixUrl(),name:"dialog-iframe"+(new Date).getTime()}),this.iframe.one("load",function(){a.get("visible")&&(a.get("autoFit")&&(clearInterval(a._interval),a._interval=setInterval(function(){a._syncHeight()},300)),a._syncHeight(),a._setPosition(),a.trigger("complete:show"))})},_fixUrl:function(){var a=this.get("content").match(/([^?#]*)(\?[^#]*)?(#.*)?/);return a.shift(),a[1]=(a[1]&&"?"!==a[1]?a[1]+"&":"?")+"t="+(new Date).getTime(),a.join("")},_createIframe:function(){var a=this;this.iframe=f("<iframe>",{src:"javascript:'';",scrolling:"no",frameborder:"no",allowTransparency:"true",css:{border:"none",width:"100%",display:"block",height:"100%",overflow:"hidden"}}).appendTo(this.contentElement),i.mixTo(this.iframe[0]),this.iframe[0].on("close",function(){a.hide()})},_syncHeight:function(){var a;if(this.get("height"))clearInterval(this._interval),delete this._interval;else{try{this._errCount=0,a=e(this.iframe)+"px"}catch(b){this._errCount=(this._errCount||0)+1,this._errCount>=6&&(a=this.get("initialHeight"),clearInterval(this._interval),delete this._interval)}this.contentElement.css("height",a),this.element[0].className=this.element[0].className}},_ajaxHtml:function(){var a=this;this.contentElement.css("height",this.get("initialHeight")),this.contentElement.load(this.get("content"),function(){a._setPosition(),a.contentElement.css("height",""),a.trigger("complete:show")})}});c.exports=k,c.exports.outerBoxClass="arale-dialog-1_3_0"}),define("arale/dialog/1.3.0/dialog.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var f in a.helpers)c[f]=c[f]||a.helpers[f];e=e||{};var g,h="",i="function",j=this.escapeExpression;return h+='<div class="',(g=c.classPrefix)?g=g.call(b,{hash:{},data:e}):(g=b.classPrefix,g=typeof g===i?g.apply(b):g),h+=j(g)+'">\n    <a class="',(g=c.classPrefix)?g=g.call(b,{hash:{},data:e}):(g=b.classPrefix,g=typeof g===i?g.apply(b):g),h+=j(g)+'-close" title="Close" href="javascript:;" data-role="close"></a>\n    <div class="',(g=c.classPrefix)?g=g.call(b,{hash:{},data:e}):(g=b.classPrefix,g=typeof g===i?g.apply(b):g),h+=j(g)+'-content" data-role="content"></div>\n</div>\n'})}),define("arale/overlay/1.1.4/overlay",["$","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events"],function(a,b,c){function d(a){return g.contains(document.documentElement,a)}function e(a){g(k.blurOverlays).each(function(b,c){if(c&&c.get("visible")){for(var d=0;d<c._relativeElements.length;d++){var e=g(c._relativeElements[d])[0];if(e===a.target||g.contains(e,a.target))return}c.hide()}})}function f(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return b.splice(c,1),b}var g=a("$"),h=a("arale/position/1.0.1/position"),i=a("arale/iframe-shim/1.0.2/iframe-shim"),j=a("arale/widget/1.1.1/widget"),k=j.extend({attrs:{width:null,height:null,zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:h.VIEWPORT,baseXY:[0,0]},parentNode:document.body},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){var a=this;this._setupShim(),this._setupResize(),this.after("render",function(){var a=this.element.css("position");("static"===a||"relative"===a)&&this.element.css({position:"absolute",left:"-9999px",top:"-9999px"})}),this.after("show",function(){a._setPosition()})},destroy:function(){return f(this,k.allOverlays),f(this,k.blurOverlays),k.superclass.destroy.call(this)},_setPosition:function(a){if(d(this.element[0])&&(a||(a=this.get("align")),a)){var b="none"===this.element.css("display");return b&&this.element.css({visibility:"hidden",display:"block"}),h.pin({element:this.element,x:a.selfXY[0],y:a.selfXY[1]},{element:a.baseElement,x:a.baseXY[0],y:a.baseXY[1]}),b&&this.element.css({visibility:"",display:"none"}),this}},_setupShim:function(){var a=new i(this.element);this.after("hide _setPosition",a.sync,a);var b=["width","height"];for(var c in b)b.hasOwnProperty(c)&&this.on("change:"+c,a.sync,a);this.before("destroy",a.destroy,a)},_setupResize:function(){k.allOverlays.push(this)},_blurHide:function(a){a=g.makeArray(a),a.push(this.element),this._relativeElements=a,k.blurOverlays.push(this)},_onRenderWidth:function(a){this.element.css("width",a)},_onRenderHeight:function(a){this.element.css("height",a)},_onRenderZIndex:function(a){this.element.css("zIndex",a)},_onRenderAlign:function(a){this._setPosition(a)},_onRenderVisible:function(a){this.element[a?"show":"hide"]()}});k.blurOverlays=[],g(document).on("click",function(a){e(a)});var l,m=g(window).width(),n=g(window).height();k.allOverlays=[],g(window).resize(function(){l&&clearTimeout(l),l=setTimeout(function(){var a=g(window).width(),b=g(window).height();(m!==a||n!==b)&&g(k.allOverlays).each(function(a,b){b&&b.get("visible")&&b._setPosition()}),m=a,n=b},80)}),c.exports=k}),define("arale/position/1.0.1/position",["$"],function(a,b){function c(a){a=h(a)||{},a.nodeType&&(a={element:a});var b=h(a.element)||k;if(1!==b.nodeType)throw new Error("posObject.element is invalid.");var c={element:b,x:a.x||0,y:a.y||0},d=b===k||"VIEWPORT"===b._id;return c.offset=function(){return m?{left:0,top:0}:d?{left:l(document).scrollLeft(),top:l(document).scrollTop()}:i(l(b)[0])},c.size=function(){var a=l(d?window:b);return{width:a.outerWidth(),height:a.outerHeight()}},c}function d(a){a.x=e(a.x,a,"width"),a.y=e(a.y,a,"height")}function e(a,b,c){if(a+="",a=a.replace(/px/gi,""),/\D/.test(a)&&(a=a.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),-1!==a.indexOf("%")&&(a=a.replace(/(\d+(?:\.\d+)?)%/gi,function(a,d){return b.size()[c]*(d/100)})),/[+\-*\/]/.test(a))try{a=new Function("return "+a)()}catch(d){throw new Error("Invalid position value: "+a)}return g(a)}function f(a){var b=a.offsetParent();b[0]===document.documentElement&&(b=l(document.body)),o&&b.css("zoom",1);var c;return c=b[0]===document.body&&"static"===b.css("position")?{top:0,left:0}:i(b[0]),c.top+=g(b.css("border-top-width")),c.left+=g(b.css("border-left-width")),c}function g(a){return parseFloat(a,10)||0}function h(a){return l(a)[0]}function i(a){var b=a.getBoundingClientRect(),c=document.documentElement;return{left:b.left+(window.pageXOffset||c.scrollLeft)-(c.clientLeft||document.body.clientLeft||0),top:b.top+(window.pageYOffset||c.scrollTop)-(c.clientTop||document.body.clientTop||0)}}var j=b,k={_id:"VIEWPORT",nodeType:1},l=a("$"),m=!1,n=(window.navigator.userAgent||"").toLowerCase(),o=-1!==n.indexOf("msie 6");j.pin=function(a,b){a=c(a),b=c(b);var e=l(a.element);"fixed"!==e.css("position")||o?(e.css("position","absolute"),m=!1):m=!0,d(a),d(b);var g=f(e),h=b.offset(),i=h.top+b.y-a.y-g.top,j=h.left+b.x-a.x-g.left;e.css({left:j,top:i})},j.center=function(a,b){j.pin({element:a,x:"50%",y:"50%"},{element:b,x:"50%",y:"50%"})},j.VIEWPORT=k}),define("arale/iframe-shim/1.0.2/iframe-shim",["$","arale/position/1.0.1/position"],function(a,b,c){function d(a){this.target=g(a).eq(0)}function e(){}function f(a){var b={display:"none",border:"none",opacity:0,position:"absolute"},c=a.css("zIndex");return c&&c>0&&(b.zIndex=c-1),g("<iframe>",{src:"javascript:''",frameborder:0,css:b}).insertBefore(a)}var g=a("$"),h=a("arale/position/1.0.1/position"),i=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6");d.prototype.sync=function(){var a=this.target,b=this.iframe;if(!a.length)return this;var c=a.outerHeight(),d=a.outerWidth();return c&&d&&!a.is(":hidden")?(b||(b=this.iframe=f(a)),b.css({height:c,width:d}),h.pin(b[0],a[0]),b.show()):b&&b.hide(),this},d.prototype.destroy=function(){this.iframe&&(this.iframe.remove(),delete this.iframe),delete this.target},i?c.exports=d:(e.prototype.sync=function(){return this},e.prototype.destroy=e,c.exports=e)}),define("arale/widget/1.1.1/widget",["arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","$","./daparser","./auto-render"],function(a,b,c){function d(){return"widget-"+w++}function e(a){return"[object String]"===v.call(a)}function f(a){return"[object Function]"===v.call(a)}function g(a){return x(document.documentElement,a)}function h(a){return a.charAt(0).toUpperCase()+a.substring(1)}function i(a){return f(a.events)&&(a.events=a.events()),a.events}function j(a,b){var c=a.match(y),d=c[1]+q+b.cid,e=c[2]||void 0;return e&&e.indexOf("{{")>-1&&(e=k(e,b)),{type:d,selector:e}}function k(a,b){return a.replace(z,function(a,c){for(var d,f=c.split("."),g=b;d=f.shift();)g=g===b.attrs?b.get(d):g[d];return e(g)?g:A})}function l(a){return null==a||void 0===a}var m=a("arale/base/1.1.1/base"),n=a("$"),o=a("./daparser"),p=a("./auto-render"),q=".delegate-events-",r="_onRender",s="data-widget-cid",t={},u=m.extend({propsInAttrs:["initElement","element","events"],element:null,events:null,attrs:{id:null,className:null,style:null,template:"<div></div>",model:null,parentNode:document.body},initialize:function(a){this.cid=d();var b=this._parseDataAttrsConfig(a);u.superclass.initialize.call(this,a?n.extend(b,a):b),this.parseElement(),this.initProps(),this.delegateEvents(),this.setup(),this._stamp(),this._isTemplate=!(a&&a.element)},_parseDataAttrsConfig:function(a){var b,c;return a&&(b=n(a.initElement?a.initElement:a.element)),b&&b[0]&&!p.isDataApiOff(b)&&(c=o.parseElement(b)),c},parseElement:function(){var a=this.element;if(a?this.element=n(a):this.get("template")&&this.parseElementFromTemplate(),!this.element||!this.element[0])throw new Error("element is invalid")},parseElementFromTemplate:function(){this.element=n(this.get("template"))},initProps:function(){},delegateEvents:function(a,b,c){if(0===arguments.length?(b=i(this),a=this.element):1===arguments.length?(b=a,a=this.element):2===arguments.length?(c=b,b=a,a=this.element):(a||(a=this.element),this._delegateElements||(this._delegateElements=[]),this._delegateElements.push(n(a))),e(b)&&f(c)){var d={};d[b]=c,b=d}for(var g in b)if(b.hasOwnProperty(g)){var h=j(g,this),k=h.type,l=h.selector;!function(b,c){var d=function(a){f(b)?b.call(c,a):c[b](a)};l?n(a).on(k,l,d):n(a).on(k,d)}(b[g],this)}return this},undelegateEvents:function(a,b){if(b||(b=a,a=null),0===arguments.length){var c=q+this.cid;if(this.element&&this.element.off(c),this._delegateElements)for(var d in this._delegateElements)this._delegateElements.hasOwnProperty(d)&&this._delegateElements[d].off(c)}else{var e=j(b,this);a?n(a).off(e.type,e.selector):this.element&&this.element.off(e.type,e.selector)}return this},setup:function(){},render:function(){this.rendered||(this._renderAndBindAttrs(),this.rendered=!0);var a=this.get("parentNode");if(a&&!g(this.element[0])){var b=this.constructor.outerBoxClass;if(b){var c=this._outerBox=n("<div></div>").addClass(b);c.append(this.element).appendTo(a)}else this.element.appendTo(a)}return this},_renderAndBindAttrs:function(){var a=this,b=a.attrs;for(var c in b)if(b.hasOwnProperty(c)){var d=r+h(c);if(this[d]){var e=this.get(c);l(e)||this[d](e,void 0,c),function(b){a.on("change:"+c,function(c,d,e){a[b](c,d,e)})}(d)}}},_onRenderId:function(a){this.element.attr("id",a)},_onRenderClassName:function(a){this.element.addClass(a)},_onRenderStyle:function(a){this.element.css(a)},_stamp:function(){var a=this.cid;(this.initElement||this.element).attr(s,a),t[a]=this},$:function(a){return this.element.find(a)},destroy:function(){this.undelegateEvents(),delete t[this.cid],this.element&&this._isTemplate&&(this.element.off(),this._outerBox?this._outerBox.remove():this.element.remove()),this.element=null,u.superclass.destroy.call(this)}});n(window).unload(function(){for(var a in t)t[a].destroy()}),u.query=function(a){var b,c=n(a).eq(0);return c&&(b=c.attr(s)),t[b]},u.autoRender=p.autoRender,u.autoRenderAll=p.autoRenderAll,u.StaticsWhiteList=["autoRender"],c.exports=u;var v=Object.prototype.toString,w=0,x=n.contains||function(a,b){return!!(16&a.compareDocumentPosition(b))},y=/^(\S+)\s*(.*)$/,z=/{{([^}]+)}}/g,A="INVALID_SELECTOR"}),define("arale/widget/1.1.1/daparser",["$"],function(a,b){function c(a){return a.toLowerCase().replace(g,function(a,b){return(b+"").toUpperCase()})}function d(a){for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];if("string"!=typeof c)continue;h.test(c)?(c=c.replace(/'/g,'"'),a[b]=d(i(c))):a[b]=e(c)}return a}function e(a){if("false"===a.toLowerCase())a=!1;else if("true"===a.toLowerCase())a=!0;else if(/\d/.test(a)&&/[^a-z]/i.test(a)){var b=parseFloat(a);b+""===a&&(a=b)}return a}var f=a("$");b.parseElement=function(a,b){a=f(a)[0];var e={};if(a.dataset)e=f.extend({},a.dataset);
else for(var g=a.attributes,h=0,i=g.length;i>h;h++){var j=g[h],k=j.name;0===k.indexOf("data-")&&(k=c(k.substring(5)),e[k]=j.value)}return b===!0?e:d(e)};var g=/-([a-z])/g,h=/^\s*[\[{].*[\]}]\s*$/,i=this.JSON?JSON.parse:f.parseJSON}),define("arale/widget/1.1.1/auto-render",["$"],function(a,b){var c=a("$"),d="data-widget-auto-rendered";b.autoRender=function(a){return new this(a).render()},b.autoRenderAll=function(a,e){"function"==typeof a&&(e=a,a=null),a=c(a||document.body);var f=[],g=[];a.find("[data-widget]").each(function(a,c){b.isDataApiOff(c)||(f.push(c.getAttribute("data-widget").toLowerCase()),g.push(c))}),f.length&&seajs.use(f,function(){for(var a=0;a<arguments.length;a++){var b=arguments[a],f=c(g[a]);if(!f.attr(d)){var h={initElement:f,renderType:"auto"},i=f.attr("data-widget-role");h[i?i:"element"]=f,b.autoRender&&b.autoRender(h),f.attr(d,"true")}}e&&e()})};var e="off"===c(document.body).attr("data-api");b.isDataApiOff=function(a){var b=c(a).attr("data-api");return"off"===b||"on"!==b&&e}}),define("arale/base/1.1.1/base",["arale/class/1.1.0/class","arale/events/1.1.0/events","./aspect","./attribute"],function(a,b,c){function d(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d="_onChange"+e(c);a[d]&&a.on("change:"+c,a[d])}}function e(a){return a.charAt(0).toUpperCase()+a.substring(1)}var f=a("arale/class/1.1.0/class"),g=a("arale/events/1.1.0/events"),h=a("./aspect"),i=a("./attribute");c.exports=f.create({Implements:[g,h,i],initialize:function(a){this.initAttrs(a),d(this,this.attrs)},destroy:function(){this.off();for(var a in this)this.hasOwnProperty(a)&&delete this[a];this.destroy=function(){}}})}),define("arale/base/1.1.1/aspect",[],function(a,b){function c(a,b,c,g){for(var h,i,j=b.split(f);h=j.shift();)i=d(this,h),i.__isAspected||e.call(this,h),this.on(a+":"+h,c,g);return this}function d(a,b){var c=a[b];if(!c)throw new Error("Invalid method name: "+b);return c}function e(a){var b=this[a];this[a]=function(){var c=Array.prototype.slice.call(arguments),d=["before:"+a].concat(c);if(this.trigger.apply(this,d)!==!1){var e=b.apply(this,arguments),f=["after:"+a,e].concat(c);return this.trigger.apply(this,f),e}},this[a].__isAspected=!0}b.before=function(a,b,d){return c.call(this,"before",a,b,d)},b.after=function(a,b,d){return c.call(this,"after",a,b,d)};var f=/\s+/}),define("arale/base/1.1.1/attribute",[],function(a,b){function c(a){return"[object String]"===t.call(a)}function d(a){return"[object Function]"===t.call(a)}function e(a){return null!=a&&a==a.window}function f(a){if(!a||"[object Object]"!==t.call(a)||a.nodeType||e(a))return!1;try{if(a.constructor&&!u.call(a,"constructor")&&!u.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}var c;if(s)for(c in a)return u.call(a,c);for(c in a);return void 0===c||u.call(a,c)}function g(a){if(!a||"[object Object]"!==t.call(a)||a.nodeType||e(a)||!a.hasOwnProperty)return!1;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function h(a,b){var c,d;for(c in b)if(b.hasOwnProperty(c)){if(d=b[c],v(d))d=d.slice();else if(f(d)){var e=a[c];f(e)||(e={}),d=h(e,d)}a[c]=d}return a}function i(a,b,c){for(var d=[],e=b.constructor.prototype;e;)e.hasOwnProperty("attrs")||(e.attrs={}),k(c,e.attrs,e),g(e.attrs)||d.unshift(e.attrs),e=e.constructor.superclass;for(var f=0,i=d.length;i>f;f++)h(a,o(d[f]))}function j(a,b){h(a,o(b,!0))}function k(a,b,c,d){for(var e=0,f=a.length;f>e;e++){var g=a[e];c.hasOwnProperty(g)&&(b[g]=d?b.get(g):c[g])}}function l(a,b){for(var c in b)if(b.hasOwnProperty(c)){var e,f=b[c].value;d(f)&&(e=c.match(x))&&(a[e[1]](m(e[2]),f),delete b[c])}}function m(a){var b=a.match(y),c=b[1]?"change:":"";return c+=b[2].toLowerCase()+b[3]}function n(a,b,c){var d={silent:!0};a.__initializingAttrs=!0;for(var e in c)c.hasOwnProperty(e)&&b[e].setter&&a.set(e,c[e],d);delete a.__initializingAttrs}function o(a,b){var c={};for(var d in a){var e=a[d];c[d]=!b&&f(e)&&p(e,z)?e:{value:e}}return c}function p(a,b){for(var c=0,d=b.length;d>c;c++)if(a.hasOwnProperty(b[c]))return!0;return!1}function q(a){return null==a||(c(a)||v(a))&&0===a.length||g(a)}function r(a,b){if(a===b)return!0;if(q(a)&&q(b))return!0;var c=t.call(a);if(c!=t.call(b))return!1;switch(c){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase;case"[object Array]":var d=a.toString(),e=b.toString();return-1===d.indexOf("[object")&&-1===e.indexOf("[object")&&d===e}if("object"!=typeof a||"object"!=typeof b)return!1;if(f(a)&&f(b)){if(!r(w(a),w(b)))return!1;for(var g in a)if(a[g]!==b[g])return!1;return!0}return!1}b.initAttrs=function(a){var b=this.attrs={},c=this.propsInAttrs||[];i(b,this,c),a&&j(b,a),n(this,b,a),l(this,b),k(c,this,b,!0)},b.get=function(a){var b=this.attrs[a]||{},c=b.value;return b.getter?b.getter.call(this,c,a):c},b.set=function(a,b,d){var e={};c(a)?e[a]=b:(e=a,d=b),d||(d={});var g=d.silent,i=d.override,j=this.attrs,k=this.__changedAttrs||(this.__changedAttrs={});for(a in e)if(e.hasOwnProperty(a)){var l=j[a]||(j[a]={});if(b=e[a],l.readOnly)throw new Error("This attribute is readOnly: "+a);l.setter&&(b=l.setter.call(this,b,a));var m=this.get(a);!i&&f(m)&&f(b)&&(b=h(h({},m),b)),j[a].value=b,this.__initializingAttrs||r(m,b)||(g?k[a]=[b,m]:this.trigger("change:"+a,b,m,a))}return this},b.change=function(){var a=this.__changedAttrs;if(a){for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];this.trigger("change:"+b,c[0],c[1],b)}delete this.__changedAttrs}return this},b._isPlainObject=f;var s,t=Object.prototype.toString,u=Object.prototype.hasOwnProperty;!function(){function a(){this.x=1}var b=[];a.prototype={valueOf:1,y:1};for(var c in new a)b.push(c);s="x"!==b[0]}();var v=Array.isArray||function(a){return"[object Array]"===t.call(a)},w=Object.keys;w||(w=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b});var x=/^(on|before|after)([A-Z].*)$/,y=/^(Change)?([A-Z])(.*)/,z=["value","getter","setter","readOnly"]}),define("arale/class/1.1.0/class",[],function(a,b,c){function d(a){return this instanceof d||!l(a)?void 0:f(a)}function e(a){var b,c;for(b in a)c=a[b],d.Mutators.hasOwnProperty(b)?d.Mutators[b].call(this,c):this.prototype[b]=c}function f(a){return a.extend=d.extend,a.implement=e,a}function g(){}function h(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&-1===m(c,d))continue;"prototype"!==d&&(a[d]=b[d])}}c.exports=d,d.create=function(a,b){function c(){a.apply(this,arguments),this.constructor===c&&this.initialize&&this.initialize.apply(this,arguments)}return l(a)||(b=a,a=null),b||(b={}),a||(a=b.Extends||d),b.Extends=a,a!==d&&h(c,a,a.StaticsWhiteList),e.call(c,b),f(c)},d.extend=function(a){return a||(a={}),a.Extends=this,d.create(a)},d.Mutators={Extends:function(a){var b=this.prototype,c=i(a.prototype);h(c,b),c.constructor=this,this.prototype=c,this.superclass=a.prototype},Implements:function(a){k(a)||(a=[a]);for(var b,c=this.prototype;b=a.shift();)h(c,b.prototype||b)},Statics:function(a){h(this,a)}};var i=Object.__proto__?function(a){return{__proto__:a}}:function(a){return g.prototype=a,new g},j=Object.prototype.toString,k=Array.isArray||function(a){return"[object Array]"===j.call(a)},l=function(a){return"[object Function]"===j.call(a)},m=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}}),define("arale/events/1.1.0/events",[],function(){function a(){}function b(a,b,c,d){var e;if(a)for(var f=0,g=a.length;g>f;f+=2)e=a[f].apply(a[f+1]||c,b),e===!1&&d.status&&(d.status=!1)}var c=/\s+/;a.prototype.on=function(a,b,d){var e,f,g;if(!b)return this;for(e=this.__events||(this.__events={}),a=a.split(c);f=a.shift();)g=e[f]||(e[f]=[]),g.push(b,d);return this},a.prototype.off=function(a,b,e){var f,g,h,i;if(!(f=this.__events))return this;if(!(a||b||e))return delete this.__events,this;for(a=a?a.split(c):d(f);g=a.shift();)if(h=f[g])if(b||e)for(i=h.length-2;i>=0;i-=2)b&&h[i]!==b||e&&h[i+1]!==e||h.splice(i,2);else delete f[g];return this},a.prototype.trigger=function(a){var d,e,f,g,h,i,j=[],k={status:!0};if(!(d=this.__events))return this;for(a=a.split(c),h=1,i=arguments.length;i>h;h++)j[h-1]=arguments[h];for(;e=a.shift();)(f=d.all)&&(f=f.slice()),(g=d[e])&&(g=g.slice()),b(g,j,this,k),b(f,[e].concat(j),this,k);return k.status},a.mixTo=function(b){b=b.prototype||b;var c=a.prototype;for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};var d=Object.keys;return d||(d=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),a}),define("arale/overlay/1.1.4/mask",["$","./overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events"],function(a,b,c){var d=a("$"),e=a("./overlay"),f=(window.navigator.userAgent||"").toLowerCase(),g=-1!==f.indexOf("msie 6"),h=d(document.body),i=d(document),j=e.extend({attrs:{width:g?i.outerWidth(!0):"100%",height:g?i.outerHeight(!0):"100%",className:"ui-mask",opacity:.2,backgroundColor:"#000",style:{position:g?"absolute":"fixed",top:0,left:0},align:{baseElement:g?h:void 0}},show:function(){return g&&(this.set("width",i.outerWidth(!0)),this.set("height",i.outerHeight(!0))),j.superclass.show.call(this)},_onRenderBackgroundColor:function(a){this.element.css("backgroundColor",a)},_onRenderOpacity:function(a){this.element.css("opacity",a)}});c.exports=new j}),define("arale/overlay/1.1.4/overlay",["$","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events"],function(a,b,c){function d(a){return g.contains(document.documentElement,a)}function e(a){g(k.blurOverlays).each(function(b,c){if(c&&c.get("visible")){for(var d=0;d<c._relativeElements.length;d++){var e=g(c._relativeElements[d])[0];if(e===a.target||g.contains(e,a.target))return}c.hide()}})}function f(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return b.splice(c,1),b}var g=a("$"),h=a("arale/position/1.0.1/position"),i=a("arale/iframe-shim/1.0.2/iframe-shim"),j=a("arale/widget/1.1.1/widget"),k=j.extend({attrs:{width:null,height:null,zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:h.VIEWPORT,baseXY:[0,0]},parentNode:document.body},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){var a=this;this._setupShim(),this._setupResize(),this.after("render",function(){var a=this.element.css("position");("static"===a||"relative"===a)&&this.element.css({position:"absolute",left:"-9999px",top:"-9999px"})}),this.after("show",function(){a._setPosition()})},destroy:function(){return f(this,k.allOverlays),f(this,k.blurOverlays),k.superclass.destroy.call(this)},_setPosition:function(a){if(d(this.element[0])&&(a||(a=this.get("align")),a)){var b="none"===this.element.css("display");return b&&this.element.css({visibility:"hidden",display:"block"}),h.pin({element:this.element,x:a.selfXY[0],y:a.selfXY[1]},{element:a.baseElement,x:a.baseXY[0],y:a.baseXY[1]}),b&&this.element.css({visibility:"",display:"none"}),this}},_setupShim:function(){var a=new i(this.element);this.after("hide _setPosition",a.sync,a);var b=["width","height"];for(var c in b)b.hasOwnProperty(c)&&this.on("change:"+c,a.sync,a);this.before("destroy",a.destroy,a)},_setupResize:function(){k.allOverlays.push(this)},_blurHide:function(a){a=g.makeArray(a),a.push(this.element),this._relativeElements=a,k.blurOverlays.push(this)},_onRenderWidth:function(a){this.element.css("width",a)},_onRenderHeight:function(a){this.element.css("height",a)},_onRenderZIndex:function(a){this.element.css("zIndex",a)},_onRenderAlign:function(a){this._setPosition(a)},_onRenderVisible:function(a){this.element[a?"show":"hide"]()}});k.blurOverlays=[],g(document).on("click",function(a){e(a)});var l,m=g(window).width(),n=g(window).height();k.allOverlays=[],g(window).resize(function(){l&&clearTimeout(l),l=setTimeout(function(){var a=g(window).width(),b=g(window).height();(m!==a||n!==b)&&g(k.allOverlays).each(function(a,b){b&&b.get("visible")&&b._setPosition()}),m=a,n=b},80)}),c.exports=k}),define("arale/templatable/0.9.2/templatable",["$","gallery/handlebars/1.0.2/handlebars"],function(a,b,c){function d(a){return h(a)?null:j(f(a))}function e(a,b){if(a){var c;if(b){if(c=a.find(b),0===c.length)throw new Error("Invalid template selector: "+b)}else c=a;return g(c.html())}}function f(a){return a.replace(/({[^}]+}})/g,"<!--$1-->").replace(/\s(src|href)\s*=\s*(['"])(.*?\{.+?)\2/g," data-templatable-$1=$2$3$2")}function g(a){return a.replace(/(?:<|&lt;)!--({{[^}]+}})--(?:>|&gt;)/g,"$1").replace(/data-templatable-/gi,"")}function h(a){return"function"==typeof a}function i(a){if(!a)return{};var b={};for(var c in a){var d=a[c];b[c]=h(d)?d:k.compile(d)}return b}var j=a("$"),k=a("gallery/handlebars/1.0.2/handlebars"),l={};c.exports={templateHelpers:null,templatePartials:null,templateObject:null,parseElementFromTemplate:function(){var a,b=this.get("template");/^#/.test(b)&&(a=document.getElementById(b.substring(1)))&&(b=a.innerHTML,this.set("template",b)),this.templateObject=d(b),this.element=j(this.compile())},compile:function(a,b){if(a||(a=this.get("template")),b||(b=this.get("model"))||(b={}),b.toJSON&&(b=b.toJSON()),h(a))return a(b,{helpers:this.templateHelpers,partials:i(this.templatePartials)});var c,d,e=this.templateHelpers,f=this.templatePartials;if(e)for(c in e)e.hasOwnProperty(c)&&k.registerHelper(c,e[c]);if(f)for(d in f)f.hasOwnProperty(d)&&k.registerPartial(d,f[d]);var g=l[a];g||(g=l[a]=k.compile(a));var j=g(b);if(e)for(c in e)e.hasOwnProperty(c)&&delete k.helpers[c];if(f)for(d in f)f.hasOwnProperty(d)&&delete k.partials[d];return j},renderPartial:function(a){if(this.templateObject){var b=e(this.templateObject,a);b?a?this.$(a).html(this.compile(b)):this.element.html(this.compile(b)):this.element.html(this.compile())}else{var c=j(this.compile()),d=c.find(a);d.length?this.$(a).html(d.html()):this.element.html(c.html())}return this}};var m=k.compile;k.compile=function(a){return h(a)?a:m.call(k,a)}}),define("gallery/handlebars/1.0.2/handlebars",[],function(a,b,c){var d={};!function(a,b){a.VERSION="1.0.0-rc.4",a.COMPILER_REVISION=3,a.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:">= 1.0.0-rc.4"},a.helpers={},a.partials={};var c=Object.prototype.toString,d="[object Function]",e="[object Object]";a.registerHelper=function(b,d,f){if(c.call(b)===e){if(f||d)throw new a.Exception("Arg not supported with multiple helpers");a.Utils.extend(this.helpers,b)}else f&&(d.not=f),this.helpers[b]=d},a.registerPartial=function(b,d){c.call(b)===e?a.Utils.extend(this.partials,b):this.partials[b]=d},a.registerHelper("helperMissing",function(a){if(2===arguments.length)return b;throw Error("Could not find property '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,e){var f=e.inverse||function(){},g=e.fn,h=c.call(b);return h===d&&(b=b.call(this)),b===!0?g(this):b===!1||null==b?f(this):"[object Array]"===h?b.length>0?a.helpers.each(b,e):f(this):g(b)}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(b,c){if(b>=a.logger.level){var d=a.logger.methodMap[b];"undefined"!=typeof console&&console[d]&&console[d].call(console,c)}}},a.log=function(b,c){a.logger.log(b,c)},a.registerHelper("each",function(b,c){var d,e=c.fn,f=c.inverse,g=0,h="";if(c.data&&(d=a.createFrame(c.data)),b&&"object"==typeof b)if(b instanceof Array)for(var i=b.length;i>g;g++)d&&(d.index=g),h+=e(b[g],{data:d});else for(var j in b)b.hasOwnProperty(j)&&(d&&(d.key=j),h+=e(b[j],{data:d}),g++);return 0===g&&(h=f(this)),h}),a.registerHelper("if",function(b,e){var f=c.call(b);return f===d&&(b=b.call(this)),!b||a.Utils.isEmpty(b)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn})}),a.registerHelper("with",function(c,d){return a.Utils.isEmpty(c)?b:d.fn(c)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)});var f=function(){function a(){this.yy={}}var c={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(a,b,c,d,e,f){var g=f.length-1;switch(e){case 1:return f[g-1];case 2:this.$=new d.ProgramNode([],f[g]);break;case 3:this.$=new d.ProgramNode(f[g-2],f[g]);break;case 4:this.$=new d.ProgramNode(f[g-1],[]);break;case 5:this.$=new d.ProgramNode(f[g]);break;case 6:this.$=new d.ProgramNode([],[]);break;case 7:this.$=new d.ProgramNode([]);break;case 8:this.$=[f[g]];break;case 9:f[g-1].push(f[g]),this.$=f[g-1];break;case 10:this.$=new d.BlockNode(f[g-2],f[g-1].inverse,f[g-1],f[g]);break;case 11:this.$=new d.BlockNode(f[g-2],f[g-1],f[g-1].inverse,f[g]);break;case 12:this.$=f[g];break;case 13:this.$=f[g];break;case 14:this.$=new d.ContentNode(f[g]);break;case 15:this.$=new d.CommentNode(f[g]);break;case 16:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1]);break;case 17:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1]);break;case 18:this.$=f[g-1];break;case 19:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1]);break;case 20:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1],!0);break;case 21:this.$=new d.PartialNode(f[g-1]);break;case 22:this.$=new d.PartialNode(f[g-2],f[g-1]);break;case 23:break;case 24:this.$=[[f[g-2]].concat(f[g-1]),f[g]];break;case 25:this.$=[[f[g-1]].concat(f[g]),null];break;case 26:this.$=[[f[g-1]],f[g]];break;case 27:this.$=[[f[g]],null];break;case 28:this.$=[[new d.DataNode(f[g])],null];break;case 29:f[g-1].push(f[g]),this.$=f[g-1];break;case 30:this.$=[f[g]];break;case 31:this.$=f[g];break;case 32:this.$=new d.StringNode(f[g]);break;case 33:this.$=new d.IntegerNode(f[g]);break;case 34:this.$=new d.BooleanNode(f[g]);break;case 35:this.$=new d.DataNode(f[g]);break;case 36:this.$=new d.HashNode(f[g]);break;case 37:f[g-1].push(f[g]),this.$=f[g-1];break;case 38:this.$=[f[g]];break;case 39:this.$=[f[g-2],f[g]];break;case 40:this.$=[f[g-2],new d.StringNode(f[g])];break;case 41:this.$=[f[g-2],new d.IntegerNode(f[g])];break;case 42:this.$=[f[g-2],new d.BooleanNode(f[g])];break;case 43:this.$=[f[g-2],new d.DataNode(f[g])];break;case 44:this.$=new d.PartialNameNode(f[g]);break;case 45:this.$=new d.IdNode(f[g]);break;case 46:f[g-2].push(f[g]),this.$=f[g-2];break;case 47:this.$=[f[g]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(a){throw Error(a)},parse:function(a){function c(){var a;return a=d.lexer.lex()||1,"number"!=typeof a&&(a=d.symbols_[a]||a),a}var d=this,e=[0],f=[null],g=[],h=this.table,i="",j=0,k=0,l=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===b&&(this.lexer.yylloc={});var m=this.lexer.yylloc;g.push(m);var n=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var o,p,q,r,s,t,u,v,w,x={};;){if(q=e[e.length-1],this.defaultActions[q]?r=this.defaultActions[q]:((null===o||o===b)&&(o=c()),r=h[q]&&h[q][o]),r===b||!r.length||!r[0]){var y="";if(!l){w=[];for(t in h[q])this.terminals_[t]&&t>2&&w.push("'"+this.terminals_[t]+"'");y=this.lexer.showPosition?"Parse error on line "+(j+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[o]||o)+"'":"Parse error on line "+(j+1)+": Unexpected "+(1==o?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(y,{text:this.lexer.match,token:this.terminals_[o]||o,line:this.lexer.yylineno,loc:m,expected:w})}}if(r[0]instanceof Array&&r.length>1)throw Error("Parse Error: multiple actions possible at state: "+q+", token: "+o);switch(r[0]){case 1:e.push(o),f.push(this.lexer.yytext),g.push(this.lexer.yylloc),e.push(r[1]),o=null,p?(o=p,p=null):(k=this.lexer.yyleng,i=this.lexer.yytext,j=this.lexer.yylineno,m=this.lexer.yylloc,l>0&&l--);break;case 2:if(u=this.productions_[r[1]][1],x.$=f[f.length-u],x._$={first_line:g[g.length-(u||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(u||1)].first_column,last_column:g[g.length-1].last_column},n&&(x._$.range=[g[g.length-(u||1)].range[0],g[g.length-1].range[1]]),s=this.performAction.call(x,i,k,j,this.yy,r[1],f,g),s!==b)return s;u&&(e=e.slice(0,-2*u),f=f.slice(0,-1*u),g=g.slice(0,-1*u)),e.push(this.productions_[r[1]][0]),f.push(x.$),g.push(x._$),v=h[e[e.length-2]][e[e.length-1]],e.push(v);break;case 3:return!0}}return!0}},d=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return 20>a.length&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,c,d,e,f;this._more||(this.yytext="",this.match="");for(var g=this._currentRules(),h=0;g.length>h&&(d=this._input.match(this.rules[g[h]]),!d||c&&!(d[0].length>c[0].length)||(c=d,e=h,this.options.flex));h++);return c?(f=c[0].match(/(?:\r\n?|\n).*/g),f&&(this.yylineno+=f.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:f?f[f.length-1].length-f[f.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+c[0].length},this.yytext+=c[0],this.match+=c[0],this.matches=c,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(c[0].length),this.matched+=c[0],a=this.performAction.call(this,this.yy,this,g[e],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:b):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a!==b?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c){switch(c){case 0:return b.yytext="\\",14;case 1:if("\\"!==b.yytext.slice(-1)&&this.begin("mu"),"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1),this.begin("emu")),b.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==b.yytext.slice(-1)&&this.popState(),"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1)),14;case 4:return b.yytext=b.yytext.substr(0,b.yyleng-4),this.popState(),15;case 5:return this.begin("par"),24;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 23;case 12:this.popState(),this.begin("com");break;case 13:return b.yytext=b.yytext.substr(3,b.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 36;case 16:return 35;case 17:return 35;case 18:return 39;case 19:break;case 20:return this.popState(),18;case 21:return this.popState(),18;case 22:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),30;case 23:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\'/g,"'"),30;case 24:return b.yytext=b.yytext.substr(1),28;case 25:return 32;case 26:return 32;case 27:return 31;case 28:return 35;case 29:return b.yytext=b.yytext.substr(1,b.yyleng-2),35;case 30:return"INVALID";case 31:break;case 32:return this.popState(),37;case 33:return 5}},a.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$:\-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$\-\/]+)/,/^(?:$)/],a.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,33],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},par:{rules:[31,32],inclusive:!1},INITIAL:{rules:[0,1,2,33],inclusive:!0}},a}();return c.lexer=d,a.prototype=c,c.Parser=a,new a}();a.Parser=f,a.parse=function(b){return b.constructor===a.AST.ProgramNode?b:(a.Parser.yy=a.AST,a.Parser.parse(b))},a.AST={},a.AST.ProgramNode=function(b,c){this.type="program",this.statements=b,c&&(this.inverse=new a.AST.ProgramNode(c))},a.AST.MustacheNode=function(a,b,c){this.type="mustache",this.escaped=!c,this.hash=b;var d=this.id=a[0],e=this.params=a.slice(1),f=this.eligibleHelper=d.isSimple;this.isHelper=f&&(e.length||b)},a.AST.PartialNode=function(a,b){this.type="partial",this.partialName=a,this.context=b},a.AST.BlockNode=function(b,c,d,e){var f=function(b,c){if(b.original!==c.original)throw new a.Exception(b.original+" doesn't match "+c.original)
};f(b.id,e),this.type="block",this.mustache=b,this.program=c,this.inverse=d,this.inverse&&!this.program&&(this.isInverse=!0)},a.AST.ContentNode=function(a){this.type="content",this.string=a},a.AST.HashNode=function(a){this.type="hash",this.pairs=a},a.AST.IdNode=function(b){this.type="ID",this.original=b.join(".");for(var c=[],d=0,e=0,f=b.length;f>e;e++){var g=b[e];if(".."===g||"."===g||"this"===g){if(c.length>0)throw new a.Exception("Invalid path: "+this.original);".."===g?d++:this.isScoped=!0}else c.push(g)}this.parts=c,this.string=c.join("."),this.depth=d,this.isSimple=1===b.length&&!this.isScoped&&0===d,this.stringModeValue=this.string},a.AST.PartialNameNode=function(a){this.type="PARTIAL_NAME",this.name=a},a.AST.DataNode=function(a){this.type="DATA",this.id=a},a.AST.StringNode=function(a){this.type="STRING",this.string=a,this.stringModeValue=a},a.AST.IntegerNode=function(a){this.type="INTEGER",this.integer=a,this.stringModeValue=Number(a)},a.AST.BooleanNode=function(a){this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},a.AST.CommentNode=function(a){this.type="comment",this.comment=a};var g=["description","fileName","lineNumber","message","name","number","stack"];a.Exception=function(){for(var a=Error.prototype.constructor.apply(this,arguments),b=0;g.length>b;b++)this[g[b]]=a[g[b]]},a.Exception.prototype=Error(),a.SafeString=function(a){this.string=a},a.SafeString.prototype.toString=function(){return""+this.string};var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/,k=function(a){return h[a]||"&amp;"};a.Utils={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},escapeExpression:function(b){return b instanceof a.SafeString?""+b:null==b||b===!1?"":(b=""+b,j.test(b)?b.replace(i,k):b)},isEmpty:function(a){return a||0===a?"[object Array]"===c.call(a)&&0===a.length?!0:!1:!0}};var l=a.Compiler=function(){},m=a.JavaScriptCompiler=function(){};l.prototype={compiler:l,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;g>f;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;a.args.length>h;h++)c=a.args[h],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;d.args.length>f;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){var b,c=a.statements;this.opcodes=[];for(var d=0,e=c.length;e>d;d++)b=c[d],this[b.type](b);return this.isSimple=1===e,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=this.classifyMustache(b);"helper"===e?this.helperMustache(b,c,d):"simple"===e?(this.simpleMustache(b),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(b,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("pushHash");for(var e=0,f=d.length;f>e;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.name),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){var b=this.options,c=this.classifyMustache(a);"simple"===c?this.simpleMustache(a):"helper"===c?this.helperMustache(a):this.ambiguousMustache(a),this.opcode(a.escaped&&!b.noEscape?"appendEscaped":"append")},ambiguousMustache:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e,f)},simpleMustache:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+e);this.opcode("invokeHelper",d.length,e)}},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var c=1,d=a.parts.length;d>c;c++)this.opcode("lookup",a.parts[c])},DATA:function(a){this.options.data=!0,this.opcode("lookupData",a.id)},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){if(isNaN(a))throw Error("EWOT");0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifyMustache:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type)):this[b.type](b)},setupMustacheParams:function(a){var b=a.params;return this.pushParams(b),a.hash?this.hash(a.hash):this.opcode("emptyHash"),b},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}};var n=function(a){this.value=a};m.prototype={nameLookup:function(a,b){return/^[0-9]+$/.test(b)?a+"["+b+"]":m.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(b,c,d,e){this.environment=b,this.options=c||{},a.log(a.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!d,this.context=d||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(b,c);var f,g=b.opcodes;for(this.i=0,r=g.length;r>this.i;this.i++)f=g[this.i],"DECLARE"===f.opcode?this[f.name]=f.value:this[f.opcode].apply(this,f.args);return this.createFunctionContext(e)},nextOpcode:function(){var a=this.environment.opcodes;return a[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = helpers || "+b+".helpers;";this.environment.usePartial&&(c=c+" partials = partials || "+b+".partials;"),this.options.data&&(c+=" data = data || {};"),a.push(c)}a.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(b){var c=this.stackVars.concat(this.registers.list);if(c.length>0&&(this.source[1]=this.source[1]+", "+c.join(", ")),!this.isChild)for(var d in this.context.aliases)this.source[1]=this.source[1]+", "+d+"="+this.context.aliases[d];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var e=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],f=0,g=this.environment.depths.list.length;g>f;f++)e.push("depth"+this.environment.depths.list[f]);var h=this.mergeSource();if(!this.isChild){var i=a.COMPILER_REVISION,j=a.REVISION_CHANGES[i];h="this.compilerInfo = ["+i+",'"+j+"'];\n"+h}if(b)return e.push(h),Function.apply(this,e);var k="function "+(this.name||"")+"("+e.join(",")+") {\n  "+h+"}";return a.log(a.logger.DEBUG,k+"\n\n"),k},mergeSource:function(){for(var a,c="",d=0,e=this.source.length;e>d;d++){var f=this.source[d];f.appendToBuffer?a=a?a+"\n    + "+f.content:f.content:(a&&(c+="buffer += "+a+";\n  ",a=b),c+=f+"\n  ")}return c},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),a[a.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},append:function(){this.flushInline();var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(a){this.push(this.nameLookup("data",a,"data"))},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext),this.pushString(b),"string"==typeof a?this.pushString(a):this.pushStackLiteral(a)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=b,this.options.stringParams&&(this.register("hashContexts","{"+a.contexts.join(",")+"}"),this.register("hashTypes","{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){this.pushStackLiteral(null!=a?this.programExpression(a):null)},invokeHelper:function(a,b){this.context.aliases.helperMissing="helpers.helperMissing";var c=this.lastHelper=this.setupHelper(a,b,!0);this.push(c.name),this.replaceStack(function(a){return a+" ? "+a+".call("+c.callParams+") : helperMissing.call("+c.helperMissingParams+")"})},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();this.source.push("if ("+f+" = "+d+") { "+f+" = "+f+".call("+c.callParams+"); }"),this.source.push("else { "+f+" = "+e+"; "+f+" = typeof "+f+" === functionType ? "+f+".apply(depth0) : "+f+"; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push("'"+a+"': "+b),c&&e.types.push("'"+a+"': "+c),e.values.push("'"+a+"': ("+d+")")},compiler:m,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;g>f;f++)b=d[f],e.push(1===b?"depth0":"depth"+(b-1));return(0===d.length?"self.program(":"self.programWithDepth(")+e.join(", ")+")"},register:function(a,b){this.useRegister(a),this.source.push(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new n(a))},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.source.push(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var b,c="",d=this.isInline();if(d){var e=this.popStack(!0);if(e instanceof n)b=e.value;else{var f=this.stackSlot?this.topStackName():this.incrStack();c="("+this.push(f)+" = "+e+"),",b=this.topStack()}}else b=this.topStack();var g=a.call(this,b);return d?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+c+g+")")):(/^stack/.test(b)||(b=this.nextStack()),this.source.push(b+" = ("+c+g+");")),b},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,c=a.length;c>b;b++){var d=a[b];d instanceof n?this.compileStack.push(d):this.pushStack(d)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();return!a&&c instanceof n?c.value:(b||this.stackSlot--,c)},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,c=b[b.length-1];return!a&&c instanceof n?c.value:c},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,b,c){var d=[];this.setupParams(a,d,c);var e=this.nameLookup("helpers",b,"helper");return{params:d,name:e,callParams:["depth0"].concat(d).join(", "),helperMissingParams:c&&["depth0",this.quotedString(b)].concat(d).join(", ")}},setupParams:function(a,b,c){var d,e,f,g=[],h=[],i=[];g.push("hash:"+this.popStack()),e=this.popStack(),f=this.popStack(),(f||e)&&(f||(this.context.aliases.self="this",f="self.noop"),e||(this.context.aliases.self="this",e="self.noop"),g.push("inverse:"+e),g.push("fn:"+f));for(var j=0;a>j;j++)d=this.popStack(),b.push(d),this.options.stringParams&&(i.push(this.popStack()),h.push(this.popStack()));return this.options.stringParams&&(g.push("contexts:["+h.join(",")+"]"),g.push("types:["+i.join(",")+"]"),g.push("hashContexts:hashContexts"),g.push("hashTypes:hashTypes")),this.options.data&&g.push("data:data"),g="{"+g.join(",")+"}",c?(this.register("options",g),b.push("options")):b.push(g),b.join(", ")}};for(var o="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),p=m.RESERVED_WORDS={},q=0,r=o.length;r>q;q++)p[o[q]]=!0;m.isValidJavaScriptVariableName=function(a){return!m.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a)?!0:!1},a.precompile=function(b,c){if(null==b||"string"!=typeof b&&b.constructor!==a.AST.ProgramNode)throw new a.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+b);c=c||{},"data"in c||(c.data=!0);var d=a.parse(b),e=(new l).compile(d,c);return(new m).compile(e,c)},a.compile=function(c,d){function e(){var e=a.parse(c),f=(new l).compile(e,d),g=(new m).compile(f,d,b,!0);return a.template(g)}if(null==c||"string"!=typeof c&&c.constructor!==a.AST.ProgramNode)throw new a.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+c);d=d||{},"data"in d||(d.data=!0);var f;return function(a,b){return f||(f=e()),f.call(this,a,b)}},a.VM={template:function(b){var c={escapeExpression:a.Utils.escapeExpression,invokePartial:a.VM.invokePartial,programs:[],program:function(b,c,d){var e=this.programs[b];return d?e=a.VM.program(b,c,d):e||(e=this.programs[b]=a.VM.program(b,c)),e},programWithDepth:a.VM.programWithDepth,noop:a.VM.noop,compilerInfo:null};return function(d,e){e=e||{};var f=b.call(c,a,d,e.helpers,e.partials,e.data),g=c.compilerInfo||[],h=g[0]||1,i=a.COMPILER_REVISION;if(h!==i){if(i>h){var j=a.REVISION_CHANGES[i],k=a.REVISION_CHANGES[h];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+j+") or downgrade your runtime to an older version ("+k+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+g[1]+")."}return f}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e},program:function(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d},noop:function(){return""},invokePartial:function(c,d,e,f,g,h){var i={helpers:f,partials:g,data:h};if(c===b)throw new a.Exception("The partial "+d+" could not be found");if(c instanceof Function)return c(e,i);if(a.compile)return g[d]=a.compile(c,{data:h!==b}),g[d](e,i);throw new a.Exception("The partial "+d+" could not be compiled when running in runtime-only mode")}},a.template=a.VM.template}(d),c.exports=d}),define("gallery/handlebars/1.0.2/runtime",[],function(a,b,c){var d={};!function(a,b){a.VERSION="1.0.0-rc.4",a.COMPILER_REVISION=3,a.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:">= 1.0.0-rc.4"},a.helpers={},a.partials={};var c=Object.prototype.toString,d="[object Function]",e="[object Object]";a.registerHelper=function(b,d,f){if(c.call(b)===e){if(f||d)throw new a.Exception("Arg not supported with multiple helpers");a.Utils.extend(this.helpers,b)}else f&&(d.not=f),this.helpers[b]=d},a.registerPartial=function(b,d){c.call(b)===e?a.Utils.extend(this.partials,b):this.partials[b]=d},a.registerHelper("helperMissing",function(a){if(2===arguments.length)return b;throw Error("Could not find property '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,e){var f=e.inverse||function(){},g=e.fn,h=c.call(b);return h===d&&(b=b.call(this)),b===!0?g(this):b===!1||null==b?f(this):"[object Array]"===h?b.length>0?a.helpers.each(b,e):f(this):g(b)}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(b,c){if(b>=a.logger.level){var d=a.logger.methodMap[b];"undefined"!=typeof console&&console[d]&&console[d].call(console,c)}}},a.log=function(b,c){a.logger.log(b,c)},a.registerHelper("each",function(b,c){var d,e=c.fn,f=c.inverse,g=0,h="";if(c.data&&(d=a.createFrame(c.data)),b&&"object"==typeof b)if(b instanceof Array)for(var i=b.length;i>g;g++)d&&(d.index=g),h+=e(b[g],{data:d});else for(var j in b)b.hasOwnProperty(j)&&(d&&(d.key=j),h+=e(b[j],{data:d}),g++);return 0===g&&(h=f(this)),h}),a.registerHelper("if",function(b,e){var f=c.call(b);return f===d&&(b=b.call(this)),!b||a.Utils.isEmpty(b)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn})}),a.registerHelper("with",function(c,d){return a.Utils.isEmpty(c)?b:d.fn(c)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)});var f=["description","fileName","lineNumber","message","name","number","stack"];a.Exception=function(){for(var a=Error.prototype.constructor.apply(this,arguments),b=0;f.length>b;b++)this[f[b]]=a[f[b]]},a.Exception.prototype=Error(),a.SafeString=function(a){this.string=a},a.SafeString.prototype.toString=function(){return""+this.string};var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},h=/[&<>"'`]/g,i=/[&<>"'`]/,j=function(a){return g[a]||"&amp;"};a.Utils={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},escapeExpression:function(b){return b instanceof a.SafeString?""+b:null==b||b===!1?"":(b=""+b,i.test(b)?b.replace(h,j):b)},isEmpty:function(a){return a||0===a?"[object Array]"===c.call(a)&&0===a.length?!0:!1:!0}},a.VM={template:function(b){var c={escapeExpression:a.Utils.escapeExpression,invokePartial:a.VM.invokePartial,programs:[],program:function(b,c,d){var e=this.programs[b];return d?e=a.VM.program(b,c,d):e||(e=this.programs[b]=a.VM.program(b,c)),e},programWithDepth:a.VM.programWithDepth,noop:a.VM.noop,compilerInfo:null};return function(d,e){e=e||{};var f=b.call(c,a,d,e.helpers,e.partials,e.data),g=c.compilerInfo||[],h=g[0]||1,i=a.COMPILER_REVISION;if(h!==i){if(i>h){var j=a.REVISION_CHANGES[i],k=a.REVISION_CHANGES[h];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+j+") or downgrade your runtime to an older version ("+k+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+g[1]+")."}return f}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e},program:function(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d},noop:function(){return""},invokePartial:function(c,d,e,f,g,h){var i={helpers:f,partials:g,data:h};if(c===b)throw new a.Exception("The partial "+d+" could not be found");if(c instanceof Function)return c(e,i);if(a.compile)return g[d]=a.compile(c,{data:h!==b}),g[d](e,i);throw new a.Exception("The partial "+d+" could not be compiled when running in runtime-only mode")}},a.template=a.VM.template}(d),c.exports=d}),define("app/common/dialog/confirmbox.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n<div class="',(d=c.classPrefix)?d=d.call(a,{hash:{},data:b}):(d=a.classPrefix,d=typeof d===n?d.apply(a):d),e+=o(d)+'-title" data-role="title">',(d=c.title)?d=d.call(a,{hash:{},data:b}):(d=a.title,d=typeof d===n?d.apply(a):d),(d||0===d)&&(e+=d),e+="</div>\n"}function g(a,b){var d,e="";return(d=c.classPrefix)?d=d.call(a,{hash:{},data:b}):(d=a.classPrefix,d=typeof d===n?d.apply(a):d),e+=o(d)+"-padding"}function h(a,b){var d,e="";return e+='\n    <div class="',(d=c.classPrefix)?d=d.call(a,{hash:{},data:b}):(d=a.classPrefix,d=typeof d===n?d.apply(a):d),e+=o(d)+'-operation" data-role="foot">\n        ',d=c["if"].call(a,a.confirmTpl,{hash:{},inverse:p.noop,fn:p.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n        ",d=c["if"].call(a,a.cancelTpl,{hash:{},inverse:p.noop,fn:p.program(8,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n    </div>\n    "}function i(a,b){var d,e="";return e+='\n        <div class="',(d=c.classPrefix)?d=d.call(a,{hash:{},data:b}):(d=a.classPrefix,d=typeof d===n?d.apply(a):d),e+=o(d)+'-confirm" data-role="confirm">\n            ',(d=c.confirmTpl)?d=d.call(a,{hash:{},data:b}):(d=a.confirmTpl,d=typeof d===n?d.apply(a):d),(d||0===d)&&(e+=d),e+="\n        </div>\n        "}function j(a,b){var d,e="";return e+='\n        <div class="',(d=c.classPrefix)?d=d.call(a,{hash:{},data:b}):(d=a.classPrefix,d=typeof d===n?d.apply(a):d),e+=o(d)+'-cancel" data-role="cancel">\n            ',(d=c.cancelTpl)?d=d.call(a,{hash:{},data:b}):(d=a.cancelTpl,d=typeof d===n?d.apply(a):d),(d||0===d)&&(e+=d),e+="\n        </div>\n        "}this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var k in a.helpers)c[k]=c[k]||a.helpers[k];e=e||{};var l,m="",n="function",o=this.escapeExpression,p=this;return l=c["if"].call(b,b.title,{hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e}),(l||0===l)&&(m+=l),m+='\n<div class="',(l=c.classPrefix)?l=l.call(b,{hash:{},data:e}):(l=b.classPrefix,l=typeof l===n?l.apply(b):l),m+=o(l)+'-container">\n    <div class="',(l=c.classPrefix)?l=l.call(b,{hash:{},data:e}):(l=b.classPrefix,l=typeof l===n?l.apply(b):l),m+=o(l)+"-message ",l=c["if"].call(b,b.hasPadding,{hash:{},inverse:p.noop,fn:p.program(3,g,e),data:e}),(l||0===l)&&(m+=l),m+='" data-role="message">\n        ',(l=c.message)?l=l.call(b,{hash:{},data:e}):(l=b.message,l=typeof l===n?l.apply(b):l),(l||0===l)&&(m+=l),m+="\n    </div>\n    ",l=c["if"].call(b,b.hasFoot,{hash:{},inverse:p.noop,fn:p.program(5,h,e),data:e}),(l||0===l)&&(m+=l),m+="\n</div>"})}),define("app/common/dialog/confirmbox.css",[],function(){seajs.importStyle(".ermp-dialog{border:0;outline:0}.ermp-dialog-content{background:#fff;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}:root .ermp-dialog{FILTER:none\\9}.ermp-dialog-close{position:absolute;top:-14px;right:-14px;font-size:21px;line-height:1;font-weight:400;font-family:Arial;background:#212121;color:#fff;padding:4px 8px;margin-top:0;opacity:1;filter:none;-webkit-border-radius:28px;-moz-border-radius:28px;border-radius:28px}.ermp-dialog-close:hover{background:#e22;color:#fff;text-decoration:none}.ermp-dialog-title{height:45px;font-size:16px;font-family:'微软雅黑','黑体',Arial;line-height:46px;border-bottom:1px solid #E1E1E1;color:#4d4d4d;text-indent:20px;background-color:#f9f9f9;background:-webkit-gradient(linear,left top,left bottom,from(#fcfcfc),to(#f9f9f9));background:-moz-linear-gradient(top,#fcfcfc,#f9f9f9);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fcfcfc', endColorstr='#f9f9f9');background:-o-linear-gradient(top,#fcfcfc,#f9f9f9);background:-ms-linear-gradient(top,#fcfcfc,#f9f9f9);background:linear-gradient(top,#fcfcfc,#f9f9f9)}.ermp-dialog-operation{text-align:center;zoom:1;padding-bottom:20px}.ermp-dialog-confirm,.ermp-dialog-cancel{display:inline}.ermp-dialog-operation .ermp-dialog-confirm{margin-right:4px}.ermp-dialog-padding{padding:20px}.ermp-dialog .checkbox-list{padding-top:9px}.ermp-confirm .ermp-dialog-message{font-size:16px;font-weight:700;text-align:center}.ermp-confirm .ermp-dialog-close{visibility:hidden}.ermp-show .ermp-dialog-message{text-align:center}.ermp-dialog .ermp-dialog-operation .btn2{border:1px solid #aeb6c5;color:#333;background:url(http://ue2.17173cdn.com/a/ermp/index/2014/images/b2.png) 0 -119px repeat-x;padding:6px 45px}.ermp-dialog .ermp-dialog-operation .btn2:hover,.btn2:active,.btn2:focus{background:url(http://ue2.17173cdn.com/a/ermp/index/2014/images/b2.png) 0 -154px repeat-x;text-decoration:none}.ermp-dialog .ermp-dialog-operation .btn-s{padding:6px 30px}")}),define("app/common/io",["$","app/common/util","app/common/config","app/common/dialog/confirmbox","arale/dialog/1.3.0/dialog","arale/overlay/1.1.4/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","arale/overlay/1.1.4/mask","arale/templatable/0.9.2/templatable","gallery/handlebars/1.0.2/handlebars","gallery/handlebars/1.0.2/runtime"],function(a){"use strict";function b(a){return function(b){return Object.prototype.toString.call(b)==="[object "+a+"]"}}var c=a("$"),d=a("app/common/util"),e=(a("app/common/dialog/confirmbox"),{}),f=Array.isArray||b("Array");return e.processor=function(a,b){var e,g,h,i;return"error"==a.result?void console.error(a.messages):void(-1!=c.inArray(a.result,["success","failure"])?(e=a.messages,f(e)&&(e=e.join("<br/>").replace("\n","<br/>")),g=b.success||b,h=b.error||function(a){d.showMessage(a)},"success"==a.result?g.call(a,e):h.call(a,e)):"input"==a.result&&(c.isEmptyObject(a.fieldErrors)?(e=a.messages.shift()||a.messages,b.input?b.input.call(a,e):console.log(e)):c.each(a.fieldErrors,function(c,d){e=d.shift&&d.shift()||d,i=b.input,i&&i[c]&&i[c].call(a,e)})))},e.post=function(a,b,c){"undefined"==typeof c&&(c=b,b={});var d={url:a,data:b,callback:c,type:"post"};e.ajax(d)},e.syncPost=function(a,b,c){"undefined"==typeof c&&(c=b,b={});var d={async:!1,url:a,data:b,callback:c,type:"post"};e.ajax(d)},e.get=function(a,b,c){"undefined"==typeof c&&(c=b,b={});var d={url:a,data:b,callback:c,type:"get"};e.ajax(d)},e.syncGet=function(a,b,c){"undefined"==typeof c&&(c=b,b={});var d={async:!1,url:a,data:b,callback:c,type:"get"};e.ajax(d)},e.ajax=function(a){var b="undefined"==typeof a.async?!0:!1;c.ajax({async:b,cache:!1,url:a.url,dataType:"json",traditional:!0,type:a.type,data:a.data,success:function(b){b&&e.processor(b,a.callback)},error:function(){console.warn("server error: "+a.url)}})},e}),define("app/common/helpers",["gallery/moment/2.0.0/moment"],function(a){var b=a("gallery/moment/2.0.0/moment");return{fdate:function(a){var c="";return a&&(c=b(a).format("YYYY-MM-DD HH:mm")),c},fExactDate:function(a){var c="";return a&&(c=b(a).format("YYYY-MM-DD HH:mm:ss.SSS")),c},judge:function(a,b,c){return a===b?c.fn(this):c.inverse(this)},contrast:function(a,b,c){return a>b?c.fn(this):c.inverse(this)},getImage:function(a){return attachmentCtx+a},urlResolve:function(a){return a.replace(/\[url\]\s*(((?!")[\s\S])*?)(?:"[\s\S]*?)?\s*\[\/url\]/gi,'<a href="$1" target="_blank">$1</a>').replace(/\[url\s*=\s*([^\]"]+?)(?:"[^\]]*?)?\s*\]\s*([\s\S]*?)\s*\[\/url\]/gi,'<a href="$1" target="_blank">$2</a>')}}}),define("gallery/moment/2.0.0/moment",[],function(a,b,c){function d(a,b){return function(c){return k(a.call(this,c),b)}}function e(a){return function(b){return this.lang().ordinal(a.call(this,b))}}function f(){}function g(a){i(this,a)}function h(a){var b=this._data={},c=a.years||a.year||a.y||0,d=a.months||a.month||a.M||0,e=a.weeks||a.week||a.w||0,f=a.days||a.day||a.d||0,g=a.hours||a.hour||a.h||0,h=a.minutes||a.minute||a.m||0,i=a.seconds||a.second||a.s||0,k=a.milliseconds||a.millisecond||a.ms||0;
this._milliseconds=k+1e3*i+6e4*h+36e5*g,this._days=f+7*e,this._months=d+12*c,b.milliseconds=k%1e3,i+=j(k/1e3),b.seconds=i%60,h+=j(i/60),b.minutes=h%60,g+=j(h/60),b.hours=g%24,f+=j(g/24),f+=7*e,b.days=f%30,d+=j(f/30),b.months=d%12,c+=j(d/12),b.years=c}function i(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b){for(var c=a+"";b>c.length;)c="0"+c;return c}function l(a,b,c){var d,e=b._milliseconds,f=b._days,g=b._months;e&&a._d.setTime(+a+e*c),f&&a.date(a.date()+f*c),g&&(d=a.date(),a.date(1).month(a.month()+g*c).date(Math.min(d,a.daysInMonth())))}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;d>c;c++)~~a[c]!==~~b[c]&&f++;return f+e}function o(a,b){return b.abbr=a,L[a]||(L[a]=new f),L[a].set(b),L[a]}function p(b){return b?(!L[b]&&M&&a("./lang/"+b),L[b]):H.fn._lang}function q(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function r(a){var b,c,d=a.match(O);for(b=0,c=d.length;c>b;b++)d[b]=gb[d[b]]?gb[d[b]]:q(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+="function"==typeof d[b].call?d[b].call(e,a):d[b];return f}}function s(a,b){function c(b){return a.lang().longDateFormat(b)||b}for(var d=5;d--&&P.test(b);)b=b.replace(P,c);return db[b]||(db[b]=r(b)),db[b](a)}function t(a){switch(a){case"DDDD":return S;case"YYYY":return T;case"YYYYY":return U;case"S":case"SS":case"SSS":case"DDD":return R;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return V;case"X":return Y;case"Z":case"ZZ":return W;case"T":return X;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return Q;default:return RegExp(a.replace("\\",""))}}function u(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":e[1]=null==b?0:~~b-1;break;case"MMM":case"MMMM":d=p(c._l).monthsParse(b),null!=d?e[1]=d:c._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=b&&(e[2]=~~b);break;case"YY":e[0]=~~b+(~~b>68?1900:2e3);break;case"YYYY":case"YYYYY":e[0]=~~b;break;case"a":case"A":c._isPm="pm"===(b+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":e[3]=~~b;break;case"m":case"mm":e[4]=~~b;break;case"s":case"ss":e[5]=~~b;break;case"S":case"SS":case"SSS":e[6]=~~(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,d=(b+"").match(ab),d&&d[1]&&(c._tzh=~~d[1]),d&&d[2]&&(c._tzm=~~d[2]),d&&"+"===d[0]&&(c._tzh=-c._tzh,c._tzm=-c._tzm)}null==b&&(c._isValid=!1)}function v(a){var b,c,d=[];if(!a._d){for(b=0;7>b;b++)a._a[b]=d[b]=null==a._a[b]?2===b?1:0:a._a[b];d[3]+=a._tzh||0,d[4]+=a._tzm||0,c=new Date(0),a._useUTC?(c.setUTCFullYear(d[0],d[1],d[2]),c.setUTCHours(d[3],d[4],d[5],d[6])):(c.setFullYear(d[0],d[1],d[2]),c.setHours(d[3],d[4],d[5],d[6])),a._d=c}}function w(a){var b,c,d=a._f.match(O),e=a._i;for(a._a=[],b=0;d.length>b;b++)c=(t(d[b]).exec(e)||[])[0],c&&(e=e.slice(e.indexOf(c)+c.length)),gb[d[b]]&&u(d[b],c,a);a._isPm&&12>a._a[3]&&(a._a[3]+=12),a._isPm===!1&&12===a._a[3]&&(a._a[3]=0),v(a)}function x(a){for(var b,c,d,e,f=99;a._f.length;){if(b=i({},a),b._f=a._f.pop(),w(b),c=new g(b),c.isValid()){d=c;break}e=n(b._a,c.toArray()),f>e&&(f=e,d=c)}i(a,d)}function y(a){var b,c=a._i;if(Z.exec(c)){for(a._f="YYYY-MM-DDT",b=0;4>b;b++)if(_[b][1].exec(c)){a._f+=_[b][0];break}W.exec(c)&&(a._f+=" Z"),w(a)}else a._d=new Date(c)}function z(a){var b=a._i,c=N.exec(b);void 0===b?a._d=new Date:c?a._d=new Date(+c[1]):"string"==typeof b?y(a):m(b)?(a._a=b.slice(0),v(a)):a._d=new Date(b instanceof Date?+b:b)}function A(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function B(a,b,c){var d=K(Math.abs(a)/1e3),e=K(d/60),f=K(e/60),g=K(f/24),h=K(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",K(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,A.apply({},i)}function C(a,b,c){var d=c-b,e=c-a.day();return e>d&&(e-=7),d-7>e&&(e+=7),Math.ceil(H(a).add("d",e).dayOfYear()/7)}function D(a){var b=a._i,c=a._f;return null===b||""===b?null:("string"==typeof b&&(a._i=b=p().preparse(b)),H.isMoment(b)?(a=i({},b),a._d=new Date(+b._d)):c?m(c)?x(a):w(a):z(a),new g(a))}function E(a,b){H.fn[a]=H.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function F(a){H.duration.fn[a]=function(){return this._data[a]}}function G(a,b){H.duration.fn["as"+a]=function(){return+this/b}}for(var H,I,J="2.0.0",K=Math.round,L={},M=void 0!==c&&c.exports,N=/^\/?Date\((\-?\d+)/i,O=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Q=/\d\d?/,R=/\d{1,3}/,S=/\d{3}/,T=/\d{1,4}/,U=/[+\-]?\d{1,6}/,V=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,W=/Z|[\+\-]\d\d:?\d\d/i,X=/T/i,Y=/[\+\-]?\d+(\.\d{1,3})?/,Z=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,$="YYYY-MM-DDTHH:mm:ssZ",_=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ab=/([\+\-]|\d\d)/gi,bb="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),cb={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},db={},eb="DDD w W M D d".split(" "),fb="M D H h m s w W".split(" "),gb={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return k(~~(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(~~(a/60),2)+":"+k(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(~~(10*a/6),4)},X:function(){return this.unix()}};eb.length;)I=eb.pop(),gb[I+"o"]=e(gb[I]);for(;fb.length;)I=fb.pop(),gb[I+I]=d(gb[I],2);for(gb.DDDD=d(gb.DDD,3),f.prototype={set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=H([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return C(a,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},H=function(a,b,c){return D({_i:a,_f:b,_l:c,_isUTC:!1})},H.utc=function(a,b,c){return D({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b})},H.unix=function(a){return H(1e3*a)},H.duration=function(a,b){var c,d=H.isDuration(a),e="number"==typeof a,f=d?a._data:e?{}:a;return e&&(b?f[b]=a:f.milliseconds=a),c=new h(f),d&&a.hasOwnProperty("_lang")&&(c._lang=a._lang),c},H.version=J,H.defaultFormat=$,H.lang=function(a,b){return a?(b?o(a,b):L[a]||p(a),void(H.duration.fn._lang=H.fn._lang=p(a))):H.fn._lang._abbr},H.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),p(a)},H.isMoment=function(a){return a instanceof g},H.isDuration=function(a){return a instanceof h},H.fn=g.prototype={clone:function(){return H(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return H.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!n(this._a,(this._isUTC?H.utc(this._a):H(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){var b=s(this,a||H.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?H.duration(+b,a):H.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?H.duration(+b,a):H.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?H(a).utc():H(a).local(),g=6e4*(this.zone()-f.zone());return b&&(b=b.replace(/s$/,"")),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-H(this).startOf("month")-(f-H(f).startOf("month")))/d,"year"===b&&(e/=12)):(d=this-f-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?d/864e5:"week"===b?d/6048e5:d),c?e:j(e)},from:function(a,b){return H.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(H(),a)},calendar:function(){var a=this.diff(H().startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<H([this.year()]).zone()||this.zone()<H([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==a?b:this.add({d:a-b})},startOf:function(a){switch(a=a.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.day(0),this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(a,b){return b=void 0!==b?b:"millisecond",+this.clone().startOf(b)>+H(a).startOf(b)},isBefore:function(a,b){return b=void 0!==b?b:"millisecond",+this.clone().startOf(b)<+H(a).startOf(b)},isSame:function(a,b){return b=void 0!==b?b:"millisecond",+this.clone().startOf(b)===+H(a).startOf(b)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return H.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=K((H(this).startOf("day")-H(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},isoWeek:function(a){var b=C(this,1,4);return null==a?b:this.add("d",7*(a-b))},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},lang:function(a){return void 0===a?this._lang:(this._lang=p(a),this)}},I=0;bb.length>I;I++)E(bb[I].toLowerCase().replace(/s$/,""),bb[I]);E("year","FullYear"),H.fn.days=H.fn.day,H.fn.weeks=H.fn.week,H.fn.isoWeeks=H.fn.isoWeek,H.duration.fn=h.prototype={weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(a){var b=+this,c=B(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},lang:H.fn.lang};for(I in cb)cb.hasOwnProperty(I)&&(G(I,cb[I]),F(I.toLowerCase()));G("Weeks",6048e5),H.lang("en",{ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),c.exports=H}),define("app/auction/crazy/list.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\r\n    <ul class="sell-goods-list clearfix" data-batch="',(d=c.auctionBatch)?d=d.call(a,{hash:{},data:b}):(d=a.auctionBatch,d=typeof d===t?d.apply(a):d),e+=u(d)+'">\r\n        ',d=c.each.call(a,a.awardForeVos,{hash:{},inverse:w.noop,fn:w.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n    </ul>\r\n"}function g(a,b){var d,e,f,g="";return g+="\r\n            ",f={hash:{},inverse:w.program(8,k,b),fn:w.program(3,h,b),data:b},d=c.soonBegin,e=d?d.call(a,a.batch,f):v.call(a,"soonBegin",a.batch,f),(e||0===e)&&(g+=e),g+="\r\n        "}function h(a,b){var d,e,f,g="";return g+='\r\n                \r\n                <li class="goods-item begin">\r\n                <span class="pic">\r\n                    <span class="pic-c1">\r\n                        <img src="',f={hash:{},data:b},g+=u((d=c.getImage,d?d.call(a,a.image,f):v.call(a,"getImage",a.image,f)))+'" width="308" height="216" alt="">\r\n                    </span>\r\n                    <span class="pic-c2">\r\n                        <span class="clearfix">\r\n                            <span class="name" title="',(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===t?e.apply(a):e),g+=u(e)+'">',(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===t?e.apply(a):e),g+=u(e)+'</span>\r\n                            <span class="jiage">￥',(e=c.price)?e=e.call(a,{hash:{},data:b}):(e=a.price,e=typeof e===t?e.apply(a):e),g+=u(e)+'</span>\r\n                        </span>\r\n                        <b class="mask"></b>\r\n                    </span>\r\n                    <span class="bq-time">\r\n                        <span class="bq-time-c J_List_CountDown"></span>\r\n                    </span>\r\n                </span>\r\n                    <div class="text">\r\n                        <div class="text-c1" title="',(e=c.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e=typeof e===t?e.apply(a):e),g+=u(e)+'">',(e=c.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e=typeof e===t?e.apply(a):e),g+=u(e)+'</div>\r\n                        <div class="text-c2">\r\n                            ',e=c["if"].call(a,a.awardLeaderUserno,{hash:{},inverse:w.program(6,j,b),fn:w.program(4,i,b),data:b}),(e||0===e)&&(g+=e),g+='\r\n                        </div>\r\n                    </div>\r\n                    <div class="gz-xq"><div class="gz-xq-in">即将开始</div></div>\r\n                </li>\r\n            '}function i(a,b){var d,e="";return e+='\r\n                                <span>\r\n                                    <span class="ico ico-cj"></span>\r\n                                    <span class="tt">\r\n                                        <span class="tt-c" title="',(d=c.awardLeaderName)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderName,d=typeof d===t?d.apply(a):d),e+=u(d)+" [",(d=c.awardLeaderDepartment)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderDepartment,d=typeof d===t?d.apply(a):d),e+=u(d)+']">',(d=c.awardLeaderName)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderName,d=typeof d===t?d.apply(a):d),e+=u(d)+" [",(d=c.awardLeaderDepartment)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderDepartment,d=typeof d===t?d.apply(a):d),e+=u(d)+']</span>\r\n                                        <span class="tt-c"> 出价：',(d=c.awardLeaderScore)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderScore,d=typeof d===t?d.apply(a):d),e+=u(d)+"</span>\r\n                                    </span>\r\n                                </span>\r\n                            "}function j(){return"\r\n                                暂无人问津\r\n                            "}function k(a,b){var d,e,f,g="";return g+="\r\n                ",f={hash:{},inverse:w.program(11,m,b),fn:w.program(9,l,b),data:b},d=c.isSuccess,e=d?d.call(a,a.awardState,f):v.call(a,"isSuccess",a.awardState,f),(e||0===e)&&(g+=e),g+="\r\n            "}function l(a,b){var d,e,f,g="";return g+='\r\n                    \r\n                    <li class="goods-item over" data-awardid="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===t?d.apply(a):d),g+=u(d)+'">\r\n                        <a href="javascript:;" class="pic" data-role="get">\r\n                            <span class="pic-c1">\r\n                                <img src="',f={hash:{},data:b},g+=u((d=c.getImage,d?d.call(a,a.image,f):v.call(a,"getImage",a.image,f)))+'" width="308" height="216" alt="">\r\n                            </span>\r\n                            <span class="pic-c2">\r\n                                <span class="clearfix">\r\n                                    <span class="name" title="',(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===t?e.apply(a):e),g+=u(e)+'">',(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===t?e.apply(a):e),g+=u(e)+'</span>\r\n                                    <span class="jiage">￥',(e=c.price)?e=e.call(a,{hash:{},data:b}):(e=a.price,e=typeof e===t?e.apply(a):e),g+=u(e)+'</span>\r\n                                </span>\r\n                                <b class="mask"></b>\r\n                            </span>\r\n                            <span class="bq-time">\r\n                                <span class="bq-time-c">已结束</span>\r\n                            </span>\r\n                        </a>\r\n                        <div class="text">\r\n                            <div class="text-c1" title="',(e=c.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e=typeof e===t?e.apply(a):e),g+=u(e)+'">',(e=c.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e=typeof e===t?e.apply(a):e),g+=u(e)+'</div>\r\n                            <div class="text-c2">\r\n                                <span class="J_Info">\r\n                                    <span class="ico ico-cj"></span>\r\n                                    <span class="tt">\r\n                                        <span class="tt-c" title="',(e=c.awardLeaderName)?e=e.call(a,{hash:{},data:b}):(e=a.awardLeaderName,e=typeof e===t?e.apply(a):e),g+=u(e)+" [",(e=c.awardLeaderDepartment)?e=e.call(a,{hash:{},data:b}):(e=a.awardLeaderDepartment,e=typeof e===t?e.apply(a):e),g+=u(e)+']">',(e=c.awardLeaderName)?e=e.call(a,{hash:{},data:b}):(e=a.awardLeaderName,e=typeof e===t?e.apply(a):e),g+=u(e)+" [",(e=c.awardLeaderDepartment)?e=e.call(a,{hash:{},data:b}):(e=a.awardLeaderDepartment,e=typeof e===t?e.apply(a):e),g+=u(e)+']</span>\r\n                                        <span class="tt-c"> 出价：',(e=c.awardLeaderScore)?e=e.call(a,{hash:{},data:b}):(e=a.awardLeaderScore,e=typeof e===t?e.apply(a):e),g+=u(e)+'</span>\r\n                                    </span>\r\n                                </span>\r\n                                <a href="javascript:;" class="jpxq" data-role="get">竞拍详情</a>\r\n                            </div>\r\n                        </div>\r\n                        <div class="gz-xq">\r\n                            <div class="gz-xq-in">物品由<strong>',(e=c.awardLeaderName)?e=e.call(a,{hash:{},data:b}):(e=a.awardLeaderName,e=typeof e===t?e.apply(a):e),g+=u(e)+"</strong>竞拍成功^_^</div>\r\n                        </div>\r\n                    </li>\r\n                "}function m(a,b){var d,e,f,g="";return g+="\r\n                    ",f={hash:{},inverse:w.program(17,q,b),fn:w.program(12,n,b),data:b},d=c.isCurrent,e=d?d.call(a,a.batch,a.awardState,f):v.call(a,"isCurrent",a.batch,a.awardState,f),(e||0===e)&&(g+=e),g+="\r\n                "}function n(a,b){var d,e,f,g="";return g+='\r\n                        \r\n                        <li class="goods-item" id="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===t?d.apply(a):d),g+=u(d)+'" data-awardid="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===t?d.apply(a):d),g+=u(d)+'">\r\n                            <a href="javascript:;" class="pic" data-role="get">\r\n                                <span class="pic-c1">\r\n                                    <img src="',f={hash:{},data:b},g+=u((d=c.getImage,d?d.call(a,a.image,f):v.call(a,"getImage",a.image,f)))+'" width="308" height="216" alt="">\r\n                                </span>\r\n                                <span class="pic-c2">\r\n                                    <span class="clearfix">\r\n                                        <span class="name" title="',(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===t?e.apply(a):e),g+=u(e)+'">',(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===t?e.apply(a):e),g+=u(e)+'</span>\r\n                                        <span class="jiage">￥',(e=c.price)?e=e.call(a,{hash:{},data:b}):(e=a.price,e=typeof e===t?e.apply(a):e),g+=u(e)+'</span>\r\n                                    </span>\r\n                                    <b class="mask"></b>\r\n                                </span>\r\n                                <span class="bq-time">\r\n                                    <span class="bq-time-c" id="J_CountDown_',(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e=typeof e===t?e.apply(a):e),g+=u(e)+'"></span>\r\n                                </span>\r\n                            </a>\r\n                            <div class="text">\r\n                                <div class="text-c1" title="',(e=c.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e=typeof e===t?e.apply(a):e),g+=u(e)+'">',(e=c.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e=typeof e===t?e.apply(a):e),g+=u(e)+'</div>\r\n                                <div class="text-c2 J_Info">\r\n                                    ',e=c["if"].call(a,a.awardLeaderUserno,{hash:{},inverse:w.program(15,p,b),fn:w.program(13,o,b),data:b}),(e||0===e)&&(g+=e),g+='\r\n                                </div>\r\n                            </div>\r\n                            <div id="J_Ctrl_',(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e=typeof e===t?e.apply(a):e),g+=u(e)+'" style="width:308px;height:48px;"></div>\r\n                        </li>\r\n                    '}function o(a,b){var d,e="";return e+='\r\n                                        <span>\r\n                                            <span class="ico ico-cj"></span>\r\n                                            <span class="tt">\r\n                                                <span class="tt-c" title="',(d=c.awardLeaderName)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderName,d=typeof d===t?d.apply(a):d),e+=u(d)+" [",(d=c.awardLeaderDepartment)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderDepartment,d=typeof d===t?d.apply(a):d),e+=u(d)+']">',(d=c.awardLeaderName)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderName,d=typeof d===t?d.apply(a):d),e+=u(d)+" [",(d=c.awardLeaderDepartment)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderDepartment,d=typeof d===t?d.apply(a):d),e+=u(d)+']</span>\r\n                                                <span class="tt-c"> 出价：',(d=c.awardLeaderScore)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderScore,d=typeof d===t?d.apply(a):d),e+=u(d)+'</span>\r\n                                            </span>\r\n                                        </span>\r\n                                        <a href="javascript:;" class="jpxq" data-role="get">竞拍详情</a>\r\n                                    '}function p(){return"\r\n                                        暂无人问津\r\n                                    "}function q(a,b){var d,e,f,g="";return g+='\r\n                        \r\n                        <li class="goods-item liupai">\r\n                            <span href="javascript:;" class="pic">\r\n                                <span class="pic-c1">\r\n                                    <img src="',f={hash:{},data:b},g+=u((d=c.getImage,d?d.call(a,a.image,f):v.call(a,"getImage",a.image,f)))+'" width="308" height="216" alt="">\r\n                                </span>\r\n                                <span class="pic-c2">\r\n                                    <span class="clearfix">\r\n                                        <span class="name" title="',(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===t?e.apply(a):e),g+=u(e)+'">',(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===t?e.apply(a):e),g+=u(e)+'</span>\r\n                                        <span class="jiage">￥',(e=c.price)?e=e.call(a,{hash:{},data:b}):(e=a.price,e=typeof e===t?e.apply(a):e),g+=u(e)+'</span>\r\n                                    </span>\r\n                                    <b class="mask"></b>\r\n                                </span>\r\n                                <span class="bq-time">\r\n                                    <span class="bq-time-c">流拍</span>\r\n                                </span>\r\n                            </span>\r\n                            <div class="text">\r\n                                <div class="text-c1" title="',(e=c.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e=typeof e===t?e.apply(a):e),g+=u(e)+'">',(e=c.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e=typeof e===t?e.apply(a):e),g+=u(e)+'</div>\r\n                                <div class="text-c2"></div>\r\n                            </div>\r\n                            <div class="gz-xq">\r\n                                <div class="gz-xq-in">该物品流拍</div>\r\n                            </div>\r\n                        </li>\r\n                    '}this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var r in a.helpers)c[r]=c[r]||a.helpers[r];e=e||{};var s,t="function",u=this.escapeExpression,v=c.helperMissing,w=this;return s=c.each.call(b,b.auctionBatchVos,{hash:{},inverse:w.noop,fn:w.program(1,f,e),data:e}),s||0===s?s:""})}),define("app/auction/crazy/ctrl.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){function f(){return'\r\n    <div class="gz-xq">\r\n        <div class="gz-xq-in">\r\n            该物品流拍\r\n        </div>\r\n    </div>\r\n'}function g(a,b){var d,e="";return e+='\r\n    <div class="gz-xq">\r\n        <div class="gz-xq-in">\r\n            物品由<strong>',(d=c.awardLeaderName)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderName,d=typeof d===q?d.apply(a):d),e+=r(d)+"</strong>竞拍成功^_^\r\n        </div>\r\n    </div>\r\n"}function h(){return'\r\n    <div class="gz-xq">\r\n        <div class="gz-xq-in">\r\n            <div class="fs14">您的积分不够，无法参与该物品竞拍%&gt;_&lt;%</div>\r\n        </div>\r\n    </div>\r\n'}function i(a,b){var d,e="";return e+='\r\n    <div class="gz-xq chujia">\r\n        <form class="form-inline" onsubmit="return false;" id="J_Form_',(d=c.awardId)?d=d.call(a,{hash:{},data:b}):(d=a.awardId,d=typeof d===q?d.apply(a):d),e+=r(d)+'" data-awardid="',(d=c.awardId)?d=d.call(a,{hash:{},data:b}):(d=a.awardId,d=typeof d===q?d.apply(a):d),e+=r(d)+'">\r\n            <div class="form-group">\r\n                <label class="col-sm-2 control-label">出价：</label>\r\n                <input type="text" class="form-control J_Input" autocomplete="off" maxlength="10" name="score">\r\n            </div>\r\n            <input type="hidden" name="awardId" value="',(d=c.awardId)?d=d.call(a,{hash:{},data:b}):(d=a.awardId,d=typeof d===q?d.apply(a):d),e+=r(d)+'">\r\n            <input type="hidden" name="auctionId" value="',(d=c.auctionId)?d=d.call(a,{hash:{},data:b}):(d=a.auctionId,d=typeof d===q?d.apply(a):d),e+=r(d)+'">\r\n            <button type="button" class="btn btn-default J_Save" disabled>确定</button>\r\n        </form>\r\n        <button class="btn allin-btn J_AllIn">ALL IN</button>\r\n    </div>\r\n'}function j(){return'\r\n    <div class="gz-xq">\r\n        <div class="gz-xq-in">\r\n            <div class="fs14">您已领拍，无法参与该物品竞拍%&gt;_&lt;%</div>\r\n        </div>\r\n    </div>\r\n'}function k(){return'\r\n    <div class="gz-xq allin"></div>\r\n'}this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var l in a.helpers)c[l]=c[l]||a.helpers[l];e=e||{};var m,n,o,p="",q="function",r=this.escapeExpression,s=this,t=c.helperMissing;return o={hash:{},inverse:s.noop,fn:s.program(1,f,e),data:e},m=c.judge,n=m?m.call(b,b.ctrlState,1,o):t.call(b,"judge",b.ctrlState,1,o),(n||0===n)&&(p+=n),p+="\r\n",o={hash:{},inverse:s.noop,fn:s.program(3,g,e),data:e},m=c.judge,n=m?m.call(b,b.ctrlState,2,o):t.call(b,"judge",b.ctrlState,2,o),(n||0===n)&&(p+=n),p+="\r\n",o={hash:{},inverse:s.noop,fn:s.program(5,h,e),data:e},m=c.judge,n=m?m.call(b,b.ctrlState,3,o):t.call(b,"judge",b.ctrlState,3,o),(n||0===n)&&(p+=n),p+="\r\n",o={hash:{},inverse:s.noop,fn:s.program(7,i,e),data:e},m=c.judge,n=m?m.call(b,b.ctrlState,4,o):t.call(b,"judge",b.ctrlState,4,o),(n||0===n)&&(p+=n),p+="\r\n",o={hash:{},inverse:s.noop,fn:s.program(9,j,e),data:e},m=c.judge,n=m?m.call(b,b.ctrlState,5,o):t.call(b,"judge",b.ctrlState,5,o),(n||0===n)&&(p+=n),p+="\r\n",o={hash:{},inverse:s.noop,fn:s.program(11,k,e),data:e},m=c.judge,n=m?m.call(b,b.ctrlState,6,o):t.call(b,"judge",b.ctrlState,6,o),(n||0===n)&&(p+=n),p+="\r\n"})}),define("app/auction/crazy/info.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){function f(){return"\r\n    &nbsp;\r\n"}function g(a,b){var d,e="";return e+="\r\n    ",d=c["if"].call(a,a.awardLeaderName,{hash:{},inverse:p.program(6,i,b),fn:p.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n"}function h(a,b){var d,e="";return e+='\r\n        <span>\r\n            <span class="ico ico-cj"></span>\r\n            <span class="tt">\r\n                <span class="tt-c" title="',(d=c.awardLeaderName)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderName,d=typeof d===n?d.apply(a):d),e+=o(d)+" [",(d=c.awardLeaderDepartment)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderDepartment,d=typeof d===n?d.apply(a):d),e+=o(d)+']">',(d=c.awardLeaderName)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderName,d=typeof d===n?d.apply(a):d),e+=o(d)+" [",(d=c.awardLeaderDepartment)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderDepartment,d=typeof d===n?d.apply(a):d),e+=o(d)+']</span>\r\n                <span class="tt-c"> 出价：',(d=c.awardLeaderScore)?d=d.call(a,{hash:{},data:b}):(d=a.awardLeaderScore,d=typeof d===n?d.apply(a):d),e+=o(d)+'</span>\r\n            </span>\r\n        </span>\r\n        <a href="javascript:;" class="jpxq" data-role="get">竞拍详情</a>\r\n    '
}function i(){return"\r\n        暂无人问津\r\n    "}this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var j in a.helpers)c[j]=c[j]||a.helpers[j];e=e||{};var k,l,m,n="function",o=this.escapeExpression,p=this,q=c.helperMissing;return m={hash:{},inverse:p.program(3,g,e),fn:p.program(1,f,e),data:e},k=c.judge,l=k?k.call(b,b.awardState,"5",m):q.call(b,"judge",b.awardState,"5",m),l||0===l?l:""})}),define("app/auction/crazy/dialog.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var f in a.helpers)c[f]=c[f]||a.helpers[f];e=e||{};var g,h,i,j="",k="function",l=this.escapeExpression,m=c.helperMissing;return j+='<div class="dialog-jpxq" id="J_Dialog_',(g=c.awardId)?g=g.call(b,{hash:{},data:e}):(g=b.awardId,g=typeof g===k?g.apply(b):g),j+=l(g)+'">\r\n    <div class="dialog-jpxq-c1">\r\n        <div class="pic"><img src="',i={hash:{},data:e},j+=l((g=c.getImage,g?g.call(b,b.image,i):m.call(b,"getImage",b.image,i)))+'" width="180" height="126" alt="" data-pinit="registered"></div>\r\n        <div class="text">\r\n            <h2 class="tit">',(h=c.name)?h=h.call(b,{hash:{},data:e}):(h=b.name,h=typeof h===k?h.apply(b):h),j+=l(h)+'</h2>\r\n            <p class="jiage">￥',(h=c.price)?h=h.call(b,{hash:{},data:e}):(h=b.price,h=typeof h===k?h.apply(b):h),j+=l(h)+"</p>\r\n            <p>",(h=c.description)?h=h.call(b,{hash:{},data:e}):(h=b.description,h=typeof h===k?h.apply(b):h),j+=l(h)+'</p>\r\n        </div>\r\n    </div>\r\n    <div class="dialog-jpxq-c3">\r\n        <div class="hd">\r\n            <h2 class="tit">竞拍纪录</h2>\r\n        </div>\r\n        <div class="bd">\r\n            <table class="table table-bordered table-striped table-condersed">\r\n                <thead>\r\n                <tr>\r\n                    <th style="width:80px;">姓名</th>\r\n                    <th>部门</th>\r\n                    <th style="width:100px;">出价</th>\r\n                    <th style="width:200px;">时间</th>\r\n                    <th style="width:100px;">可用积分</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody id="J_Dialog_List"></tbody>\r\n            </table>\r\n            <ul class="pagination" id="J_Dialog_Page"></ul>\r\n        </div>\r\n    </div>\r\n</div>'})}),define("app/auction/crazy/dialogList.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){function f(){return'\r\n    <tr><td colspan="5" style="text-align: center;">暂无竞拍记录</td></tr>\r\n'}function g(a,b){var d,e="";return e+="\r\n    ",d=c.each.call(a,a.listData,{hash:{},inverse:p.noop,fn:p.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n"}function h(a,b){var d,e,f,g="";return g+="\r\n        <tr>\r\n            <td>",(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a.name,d=typeof d===m?d.apply(a):d),g+=n(d)+"</td>\r\n            <td>",(d=c.department)?d=d.call(a,{hash:{},data:b}):(d=a.department,d=typeof d===m?d.apply(a):d),g+=n(d)+"</td>\r\n            <td>",(d=c.score)?d=d.call(a,{hash:{},data:b}):(d=a.score,d=typeof d===m?d.apply(a):d),g+=n(d)+"</td>\r\n            <td>",f={hash:{},data:b},g+=n((d=c.fExactDate,d?d.call(a,a.createTime,f):o.call(a,"fExactDate",a.createTime,f)))+"</td>\r\n            <td>",(e=c.userScore)?e=e.call(a,{hash:{},data:b}):(e=a.userScore,e=typeof e===m?e.apply(a):e),g+=n(e)+"</td>\r\n        </tr>\r\n    "}this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var i in a.helpers)c[i]=c[i]||a.helpers[i];e=e||{};var j,k,l,m="function",n=this.escapeExpression,o=c.helperMissing,p=this;return l={hash:{},inverse:p.program(3,g,e),fn:p.program(1,f,e),data:e},j=c.judge,k=j?j.call(b,(j=b.listData,null==j||j===!1?j:j.length),0,l):o.call(b,"judge",(j=b.listData,null==j||j===!1?j:j.length),0,l),k||0===k?k:""})}),define("app/common/tictac",[],function(){"use strict";!function(){var a={_currentTime:0,_lastTimeForCallback:0,_lastTimeForInterval:0,_timer:null,_instanceHash:{},_callbackInterval:0,_timerInterval:300,_callbackCountDown:0,_callback:null,init:function(a){var b=this;b._currentTime=a.currentTime,b._lastTimeForCallback=a.currentTime,b._lastTimeForInterval=+new Date,b._callback=a.callback,b._callbackInterval=a.interval,b._callbackCountDown=0,b._run()},_run:function(){var a=this;a._timer=setInterval(function(){a._currentTime+=+new Date-a._lastTimeForInterval,a._lastTimeForInterval=+new Date,a._check()},a._timerInterval)},_check:function(){var a=this;for(var b in a._instanceHash)a._instanceHash.hasOwnProperty(b)&&a._sync(b);a._callbackCountDown>=a._callbackInterval?(a._callbackCountDown-=a._callbackInterval,a._lastTimeForCallback=a._currentTime-a._callbackCountDown,a._callback()):a._callbackCountDown=a._currentTime-a._lastTimeForCallback},execute:function(){var a=this;a._lastTimeForCallback=a._currentTime,a._callbackCountDown=0,a._callback()},_sync:function(a){var b=this,c=b._instanceHash[a],d=c.expires<=b._currentTime?0:c.expires-b._currentTime;if(0===d)b.remove(a),"function"==typeof c.timeout&&c.timeout();else if("string"==typeof c.targetId){var e=document.getElementById(c.targetId);e&&(e.innerHTML=b.util.format(d,c.format,c.formatIgnore))}},create:function(a,b){var c=this;c._instanceHash.hasOwnProperty(a)||(c._instanceHash[a]=b)},reset:function(b,c){var d=this;d._instanceHash.hasOwnProperty(b)&&(d._instanceHash[b]=a.util.extend(d._instanceHash[b],c))},remove:function(a){var b=this;b._instanceHash.hasOwnProperty(a)&&(b._instanceHash[a].targetId&&(document.getElementById(b._instanceHash[a].targetId).innerHTML=""),delete b._instanceHash[a])},getCurrentTime:function(){return this._currentTime},regulate:function(a){var b=this;b._currentTime=a,b._lastTimeForCallback=a,b._lastTimeForInterval=+new Date,b._callbackCountDown=0,clearInterval(b._timer),b._run()},destroy:function(){clearInterval(this._timer),this._timer=null;for(var a in this._instanceHash)this.remove(a);this._instanceHash={}}};a.util={format:function(a,c,d){var e="";if(0>a||"object"!=typeof c)return e;"[object Boolean]"!==Object.prototype.toString.call(d)&&(d=!0);var f={days:Math.floor(a/864e5),hours:Math.floor(a%864e5/36e5),minutes:Math.floor(a%36e5/6e4),seconds:Math.floor(a%6e4/1e3)};for(var g in c)if(c.hasOwnProperty(g)){var h=f[g];0===h&&""===e&&d&&"seconds"!==g||(e+=c[g].replace(b[g],function(){return 10>h&&arguments[0].length>3&&(h="0"+h),h}))}return e},extend:function(){for(var a=arguments[0],b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d in c)a[d]=c[d]}return a}};var b={days:/{[Dd]}/g,hours:/{[Hh]{2}}|{[Hh]}/g,minutes:/{[Mm]{2}}|{[Mm]}/g,seconds:/{[Ss]{2}}|{[Ss]}/g};window.Tictac||(window.Tictac=a)}()}),define("keenwon/jqPaginator/1.1.0/jqPaginator",["$"],function(a){var b=a("$");!function(a){"use strict";a.jqPaginator=function(b,c){if(!(this instanceof a.jqPaginator))return new a.jqPaginator(b,c);var d=this;return d.$container=a(b),d.$container.data("jqPaginator",d),d.init=function(){(c.first||c.prev||c.next||c.last||c.page)&&(c=a.extend({},{first:"",prev:"",next:"",last:"",page:""},c)),d.options=a.extend({},a.jqPaginator.defaultOptions,c),d.verify(),d.extendJquery(),d.render(),d.fireEvent(this.options.currentPage,"init")},d.verify=function(){var a=d.options;if(!a.totalPages&&!a.totalCounts)throw new Error("[jqPaginator] totalCounts or totalPages is required");if(!a.totalPages&&a.totalCounts&&!a.pageSize)throw new Error("[jqPaginator] pageSize is required");if(a.totalCounts&&a.pageSize&&(a.totalPages=Math.ceil(a.totalCounts/a.pageSize)),a.currentPage<1||a.currentPage>a.totalPages)throw new Error("[jqPaginator] currentPage is incorrect");if(a.totalPages<1)throw new Error("[jqPaginator] totalPages cannot be less currentPage")},d.extendJquery=function(){a.fn.jqPaginatorHTML=function(b){return b?this.before(b).remove():a("<p>").append(this.eq(0).clone()).html()}},d.render=function(){d.renderHtml(),d.setStatus(),d.bindEvents()},d.renderHtml=function(){for(var b=[],c=d.getPages(),e=0,f=c.length;f>e;e++)b.push(d.buildItem("page",c[e]));d.isEnable("prev")&&b.unshift(d.buildItem("prev",d.options.currentPage-1)),d.isEnable("first")&&b.unshift(d.buildItem("first",1)),d.isEnable("statistics")&&b.unshift(d.buildItem("statistics")),d.isEnable("next")&&b.push(d.buildItem("next",d.options.currentPage+1)),d.isEnable("last")&&b.push(d.buildItem("last",d.options.totalPages)),d.$container.html(d.options.wrapper?a(d.options.wrapper).html(b.join("")).jqPaginatorHTML():b.join(""))},d.buildItem=function(b,c){var e=d.options[b].replace(/{{page}}/g,c).replace(/{{totalPages}}/g,d.options.totalPages).replace(/{{totalCounts}}/g,d.options.totalCounts);return a(e).attr({"jp-role":b,"jp-data":c}).jqPaginatorHTML()},d.setStatus=function(){var b=d.options;d.isEnable("first")&&1!==b.currentPage||a("[jp-role=first]",d.$container).addClass(b.disableClass),d.isEnable("prev")&&1!==b.currentPage||a("[jp-role=prev]",d.$container).addClass(b.disableClass),(!d.isEnable("next")||b.currentPage>=b.totalPages)&&a("[jp-role=next]",d.$container).addClass(b.disableClass),(!d.isEnable("last")||b.currentPage>=b.totalPages)&&a("[jp-role=last]",d.$container).addClass(b.disableClass),a("[jp-role=page]",d.$container).removeClass(b.activeClass),a("[jp-role=page][jp-data="+b.currentPage+"]",d.$container).addClass(b.activeClass)},d.getPages=function(){var a=[],b=d.options.visiblePages,c=d.options.currentPage,e=d.options.totalPages;b>e&&(b=e);var f=Math.floor(b/2),g=c-f+1-b%2,h=c+f;1>g&&(g=1,h=b),h>e&&(h=e,g=1+e-b);for(var i=g;h>=i;)a.push(i),i++;return a},d.isEnable=function(a){return d.options[a]&&"string"==typeof d.options[a]},d.switchPage=function(a){d.options.currentPage=a,d.render()},d.fireEvent=function(a,b){return"function"!=typeof d.options.onPageChange||d.options.onPageChange(a,b)!==!1},d.callMethod=function(b,c){switch(b){case"option":d.options=a.extend({},d.options,c),d.verify(),d.render();break;case"destroy":d.$container.empty(),d.$container.removeData("jqPaginator");break;default:throw new Error('[jqPaginator] method "'+b+'" does not exist')}return d.$container},d.bindEvents=function(){var b=d.options;d.$container.off(),d.$container.on("click","[jp-role]",function(){var c=a(this);if(!c.hasClass(b.disableClass)&&!c.hasClass(b.activeClass)){var e=+c.attr("jp-data");d.fireEvent(e,"change")&&d.switchPage(e)}})},d.init(),d.$container},a.jqPaginator.defaultOptions={wrapper:"",first:'<li class="first"><a href="javascript:;">First</a></li>',prev:'<li class="prev"><a href="javascript:;">Previous</a></li>',next:'<li class="next"><a href="javascript:;">Next</a></li>',last:'<li class="last"><a href="javascript:;">Last</a></li>',page:'<li class="page"><a href="javascript:;">{{page}}</a></li>',totalPages:0,totalCounts:0,pageSize:0,currentPage:1,visiblePages:7,disableClass:"disabled",activeClass:"active",onPageChange:null},a.fn.jqPaginator=function(){var b=this,c=Array.prototype.slice.call(arguments);if("string"==typeof c[0]){var d=a(b).data("jqPaginator");if(d)return d.callMethod(c[0],c[1]);throw new Error("[jqPaginator] the element is not instantiated")}return new a.jqPaginator(this,c[0])}}(b)});